import"../chunks/DsnmJJEf.js";import{i as Wt}from"../chunks/DgtA8YEt.js";import{w as hs,o as Fe,b as zs,s as ft,c as Cn,g as xs}from"../chunks/BOOvQJmq.js";import{F as qs,x as Hn,aX as Xs,C as $e,y as te,a9 as Se,z as rs,g as o,a0 as bt,A as In,H as Vn,B as Ds,D as Qe,M as ve,aa as Us,ae as Gn,G as is,J as $n,aY as je,aZ as Le,I as On,a_ as Fs,Q as dt,a$ as Ms,ai as Ys,as as jn,K as Ks,L as Ln,b0 as Rn,b1 as Ze,P as zn,aH as Ws,b2 as qn,ac as Qs,b3 as Xn,ah as Un,b4 as Yn,_ as Zs,t as z,b5 as Kn,af as Wn,ad as Qn,ap as Cs,b6 as Zn,p as Vt,m as F,q as P,s as Jn,n as ta,v as y,l as k,o as Gt,w as B,b7 as Pe,aG as we,b8 as le,b as M,e as d,b9 as tt,aT as ea,k as It,ba as ct,V as j,bb as ps,i as ls,bc as he,bd as Hs}from"../chunks/ftEH15dk.js";import{r as sa,p as E,s as ge,a as ee,c as Je,i as Q,b as na,d as aa,e as Is}from"../chunks/CedbwB1J.js";import{a as oa,b as Yt,s as nt,c as xe,d as me}from"../chunks/hCBHUXBO.js";function Js(s,t){return t}function ra(s,t,e){for(var r=s.items,a=[],n=t.length,i=0;i<n;i++)Xn(t[i].e,a,!0);var m=n>0&&a.length===0&&e!==null;if(m){var p=e.parentNode;Un(p),p.append(e),r.clear(),Ut(s,t[0].prev,t[n-1].next)}Yn(a,()=>{for(var v=0;v<n;v++){var u=t[v];m||(r.delete(u.k),Ut(s,u.prev,u.next)),Ws(u.e,!m)}})}function Ft(s,t,e,r,a,n=null){var i=s,m={flags:t,items:new Map,first:null},p=(t&Xs)!==0;if(p){var v=s;i=te?$e(Se(v)):v.appendChild(qs())}te&&rs();var u=null,D=!1,G=new Map,_=bt(()=>{var T=e();return jn(T)?T:T==null?[]:Ys(T)}),f,g;function l(){ia(g,f,m,G,i,a,t,r,e),n!==null&&(f.length===0?u?Ks(u):u=is(()=>n(i)):u!==null&&Ln(u,()=>{u=null}))}Hn(()=>{g??=Zs,f=o(_);var T=f.length;if(D&&T===0)return;D=T===0;let x=!1;if(te){var O=In(i)===Vn;O!==(T===0)&&(i=Ds(),$e(i),Qe(!1),x=!0)}if(te){for(var q=null,w,A=0;A<T;A++){if(ve.nodeType===Us&&ve.data===Gn){i=ve,x=!0,Qe(!1);break}var N=f[A],b=r(N,A);w=cs(ve,m,q,null,N,b,A,a,t,e),m.items.set(b,w),q=w}T>0&&$e(Ds())}if(te)T===0&&n&&(u=is(()=>n(i)));else if($n()){var S=new Set,$=On;for(A=0;A<T;A+=1){N=f[A],b=r(N,A);var L=m.items.get(b)??G.get(b);L?(t&(je|Le))!==0&&tn(L,N,A,t):(w=cs(null,m,null,null,N,b,A,a,t,e,!0),G.set(b,w)),S.add(b)}for(const[V,H]of m.items)S.has(V)||$.skipped_effects.add(H.e);$.add_callback(l)}else l();x&&Qe(!0),o(_)}),te&&(i=ve)}function ia(s,t,e,r,a,n,i,m,p){var v=(i&qn)!==0,u=(i&(je|Le))!==0,D=t.length,G=e.items,_=e.first,f=_,g,l=null,T,x=[],O=[],q,w,A,N;if(v)for(N=0;N<D;N+=1)q=t[N],w=m(q,N),A=G.get(w),A!==void 0&&(A.a?.measure(),(T??=new Set).add(A));for(N=0;N<D;N+=1){if(q=t[N],w=m(q,N),A=G.get(w),A===void 0){var b=r.get(w);if(b!==void 0){r.delete(w),G.set(w,b);var S=l?l.next:f;Ut(e,l,b),Ut(e,b,S),ts(b,S,a),l=b}else{var $=f?f.e.nodes_start:a;l=cs($,e,l,l===null?e.first:l.next,q,w,N,n,i,p)}G.set(w,l),x=[],O=[],f=l.next;continue}if(u&&tn(A,q,N,i),(A.e.f&Ze)!==0&&(Ks(A.e),v&&(A.a?.unfix(),(T??=new Set).delete(A))),A!==f){if(g!==void 0&&g.has(A)){if(x.length<O.length){var L=O[0],V;l=L.prev;var H=x[0],I=x[x.length-1];for(V=0;V<x.length;V+=1)ts(x[V],L,a);for(V=0;V<O.length;V+=1)g.delete(O[V]);Ut(e,H.prev,I.next),Ut(e,l,H),Ut(e,I,L),f=L,l=I,N-=1,x=[],O=[]}else g.delete(A),ts(A,f,a),Ut(e,A.prev,A.next),Ut(e,A,l===null?e.first:l.next),Ut(e,l,A),l=A;continue}for(x=[],O=[];f!==null&&f.k!==w;)(f.e.f&Ze)===0&&(g??=new Set).add(f),O.push(f),f=f.next;if(f===null)continue;A=f}x.push(A),l=A,f=A.next}if(f!==null||g!==void 0){for(var R=g===void 0?[]:Ys(g);f!==null;)(f.e.f&Ze)===0&&R.push(f),f=f.next;var ut=R.length;if(ut>0){var et=(i&Xs)!==0&&D===0?a:null;if(v){for(N=0;N<ut;N+=1)R[N].a?.measure();for(N=0;N<ut;N+=1)R[N].a?.fix()}ra(e,R,et)}}v&&zn(()=>{if(T!==void 0)for(A of T)A.a?.apply()}),s.first=e.first&&e.first.e,s.last=l&&l.e;for(var kt of r.values())Ws(kt.e);r.clear()}function tn(s,t,e,r){(r&je)!==0&&Fs(s.v,t),(r&Le)!==0?Fs(s.i,e):s.i=e}function cs(s,t,e,r,a,n,i,m,p,v,u){var D=(p&je)!==0,G=(p&Rn)===0,_=D?G?dt(a,!1,!1):Ms(a):a,f=(p&Le)===0?i:Ms(i),g={i:f,v:_,k:n,a:null,e:null,prev:e,next:r};try{if(s===null){var l=document.createDocumentFragment();l.append(s=qs())}return g.e=is(()=>m(s,_,f,v),te),g.e.prev=e&&e.e,g.e.next=r&&r.e,e===null?u||(t.first=g):(e.next=g,e.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function ts(s,t,e){for(var r=s.next?s.next.e.nodes_start:e,a=t?t.e.nodes_start:e,n=s.e.nodes_start;n!==null&&n!==r;){var i=Qs(n);a.before(n),n=i}}function Ut(s,t,e){t===null?s.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function _e(s,t,e=!1,r=!1,a=!1){var n=s,i="";z(()=>{var m=Zs;if(i===(i=t()??"")){te&&rs();return}if(m.nodes_start!==null&&(Kn(m.nodes_start,m.nodes_end),m.nodes_start=m.nodes_end=null),i!==""){if(te){ve.data;for(var p=rs(),v=p;p!==null&&(p.nodeType!==Us||p.data!=="");)v=p,p=Qs(p);if(p===null)throw Wn(),Qn;Cs(ve,v),n=$e(p);return}var u=i+"";e?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var D=Zn(u);if((e||r)&&(D=Se(D)),Cs(Se(D),D.lastChild),e||r)for(;Se(D);)n.before(Se(D));else n.before(D)}})}const la=()=>performance.now(),Ht={tick:s=>requestAnimationFrame(s),now:()=>la(),tasks:new Set};function en(){const s=Ht.now();Ht.tasks.forEach(t=>{t.c(s)||(Ht.tasks.delete(t),t.f())}),Ht.tasks.size!==0&&Ht.tick(en)}function ca(s){let t;return Ht.tasks.size===0&&Ht.tick(en),{promise:new Promise(e=>{Ht.tasks.add(t={c:s,f:e})}),abort(){Ht.tasks.delete(t)}}}function Vs(s){return function(...t){var e=t[0];return e.preventDefault(),s?.apply(this,t)}}var X=(s=>(s.A="A",s.B="B",s.C="C",s.D="D",s.E="E",s.F="F",s.G="G",s))(X||{});const da=["Cb2","C2","C#2","Db2","D2","D#2","Eb2","A#5","B1","Bb5","B5","B#5","C6"],ds=[2,3,4,5],fa={C:24,D:26,E:28,F:29,G:31,A:33,B:35};var Z=(s=>(s.none="",s.sharp="#",s.flat="b",s))(Z||{}),J=(s=>(s.topNote="topNote",s.bottomNote="bottomNote",s.ding="ding",s))(J||{}),Tt=(s=>(s.note="note",s.slap="slap",s.ghost="ghost",s.none="none",s))(Tt||{});class fs{_id;_htmlElement=null;_note;_alteration;_octave;_isPlaying=!1;position;_type;get id(){return this._id}get htmlElement(){if(!this._htmlElement)throw new Error("Tried to access HTML element of handpan note, but it is not set.You might want to call refreshHtmlElement() first.");return this._htmlElement}set htmlElement(t){if(!t){console.warn("Tried to set empty html element to handpan note.");return}this._htmlElement=t}get octave(){return this._octave}set octave(t){this._octave=t,this.refresh()}get alteration(){return this._alteration}set alteration(t){this._alteration=t,this.refresh()}get note(){return this._note}set note(t){this._note=t,this.refresh()}get type(){return this._type}get fullName(){return this._note+this._alteration+this._octave}get isPlaying(){return this._isPlaying}get fullDetailedName(){return(this.isDing?" Ding":"")+(this.isBottom?" Bottom":"")+(this.isDing||this.isBottom?" - ":"")+this.position+" - "+this.fullName}get isTop(){return this._type===J.topNote}get isDing(){return this._type===J.ding}get isBottom(){return this._type===J.bottomNote}get midiNumber(){const t=fa[this._note]??0;if(!t)throw new Error(`Invalid note: ${this._note}. Cannot calculate MIDI number.`);let e=t+(this._octave-1)*12;return this._alteration===Z.sharp?e++:this._alteration===Z.flat&&e--,e}constructor(t,e,r,a,n){if(this._note=t,this._alteration=e,this._octave=r,this._type=a,this.position=n,n<0)throw new Error("Note position must be a non-negative and non-zero integer.");this._id=this.fullDetailedName,this.refresh(),this.refreshHtmlElement()}forcePosition(t){this.position=t}setPlaying(){if(!this._htmlElement){console.warn("Playing note is not attached to any HTML element. The issue might be that this not is not in your current handpan tune.");return}this._isPlaying=!0,this._htmlElement.classList.add("playing"),this._htmlElement.firstElementChild?.classList.add("playing")}stopPlaying(){this._htmlElement&&(this._isPlaying=!1,this._htmlElement.classList.remove("playing"),this._htmlElement.firstElementChild?.classList.remove("playing"))}refreshHtmlElement(){if(typeof document>"u")return;const t=document.querySelector(`[data-handpan-note="${this.fullName}"]`);t&&(this.htmlElement=t)}refresh(){this._id=this.fullDetailedName;const t={"B#":[X.C,Z.none,1],"E#":[X.F,Z.none,0],Ab:[X.G,Z.sharp,0],Bb:[X.A,Z.sharp,0],Cb:[X.B,Z.none,-1],Db:[X.C,Z.none,0],Eb:[X.D,Z.sharp,0],Fb:[X.E,Z.none,0],Gb:[X.F,Z.sharp,0]},e=this._note+this._alteration,r=t[e];if(!r)return;let a;[this._note,this._alteration,a]=r,!(a&&(this._octave+a<Math.min(...ds)||this._octave+a<Math.max(...ds)))&&a&&(this._octave+=a)}}class Oe{_topNotes=[];_dings=[];_bottomNotes=[];constructor(t){t.forEach(e=>this.addNote(e)),this.refresh()}static fromDeserializedJson(t){if(!t)throw"Empty JSON cannot be used to create HandpanTune.";if(!t._topNotes||!t._dings||!t._bottomNotes)throw"Handpan Tune incoming JSON does not contain all necessary fields.";if(!Array.isArray(t._topNotes)||!Array.isArray(t._dings)||!Array.isArray(t._bottomNotes))throw"Handpan Tune incoming JSON does not contain arrays for top notes, dings and/or bottom notes.";return new Oe([...t._topNotes,...t._dings,...t._bottomNotes])}get dings(){return this._dings}get topNotes(){return this._topNotes}get bottomNotes(){return this._bottomNotes}get numberOfNotes(){return this._topNotes.length+this._dings.length+this._bottomNotes.length}get notes(){return[...this._topNotes,...this._dings,...this._bottomNotes]}clone(){return new Oe([...this._topNotes,...this._dings,...this._bottomNotes])}addNote(t){t.isTop?(this._topNotes.push(t),t.forcePosition(this._topNotes.length)):t.isDing?(this._dings.push(t),t.forcePosition(this._dings.length)):t.isBottom&&(this._bottomNotes.push(t),t.forcePosition(this._topNotes.length))}addNoteFromDetails(t,e,r,a){let n;if(a===J.topNote)n=this._topNotes.length??0;else if(a===J.ding)n=this._dings.length??0;else if(a===J.bottomNote)n=this._bottomNotes.length??0;else throw new Error("Invalid note type provided for HandpanNote creation.");const i=new fs(t,e,r,a,n);this.addNote(i)}removeNote(t){t.isTop?(this._topNotes=this._topNotes.filter(e=>e.id!==t.id),t.forcePosition(this._topNotes.length)):t.isDing?(this._dings=this._dings.filter(e=>e.id!==t.id),t.forcePosition(this._dings.length)):t.isBottom&&(this._bottomNotes=this._bottomNotes.filter(e=>e.id!==t.id),t.forcePosition(this._topNotes.length))}addNoteAt(t,e){const r=new fs(X.A,Z.none,3,e,t);let a;switch(e){case J.topNote:a=this.topNotes;break;case J.bottomNote:a=this.bottomNotes;break;case J.ding:a=this.dings;break;default:throw new Error("Expected note to be either top, ding or bottom, and found an unsupported value.")}a.forEach(n=>{n.position>=t&&n.position++}),a.splice(t===1?t-1:t,0,r)}getTopNoteByPosition(t){for(const e of this._topNotes)if(e.position===t)return e;return null}getBottomNoteByPosition(t){for(const e of this._bottomNotes)if(e.position===t)return e;return null}getDingByPosition(t){for(const e of this._dings)if(e.position===t)return e;return null}getSameNote(t){switch(!0){case t.isTop:return this.getTopNoteByPosition(t.position);case t.isDing:return this.getDingByPosition(t.position);case t.isBottom:return this.getBottomNoteByPosition(t.position);default:throw new Error("Expected note to be either top, ding or bottom, and found an unsupported value.")}}refresh(){const t=(e,r)=>{const a=e.position,n=r.position;switch(!0){case a<n:return-1;case a===n:throw new Error("Two notes cannot have the same position!");case a>n:return 1}throw new Error("Uncovered case, maybe note position is NaN?")};this._topNotes.sort(t),this._dings.sort(t),this._bottomNotes.sort(t)}}const vs=hs(ms());function ua(){ha()&&(console.error("No Handpan Tune in storage. Fallback to default tune."),vs.set(ms()))}function ha(){return(typeof window<"u"?window?.localStorage:null)||null}function pa(s){vs.set(s.clone())}function ms(){const s=new Oe([]);return s.addNoteFromDetails(X.A,Z.none,3,J.bottomNote),s.addNoteFromDetails(X.B,Z.none,3,J.bottomNote),s.addNoteFromDetails(X.C,Z.sharp,3,J.ding),s.addNoteFromDetails(X.G,Z.sharp,3,J.topNote),s.addNoteFromDetails(X.A,Z.none,3,J.topNote),s.addNoteFromDetails(X.B,Z.none,3,J.topNote),s.addNoteFromDetails(X.C,Z.sharp,4,J.topNote),s.addNoteFromDetails(X.D,Z.sharp,4,J.topNote),s.addNoteFromDetails(X.E,Z.none,4,J.topNote),s.addNoteFromDetails(X.F,Z.sharp,4,J.topNote),s.addNoteFromDetails(X.G,Z.sharp,4,J.topNote),s}const Kt={...vs,set:pa,init:ua};class Bt{url="";buffer=null;static sources=[];static context;constructor(t){Bt.context||(Bt.context=new AudioContext),this.url=t}load(){return this.url?this.buffer?Promise.resolve(this.buffer):new Promise((t,e)=>{const r=new XMLHttpRequest;r.open("GET",this.url,!0),r.responseType="arraybuffer",r.onload=()=>{Bt.context.decodeAudioData(r.response,a=>{if(!a){console.log(`Sound decoding error: ${this.url}`),e(new Error(`Sound decoding error: ${this.url}`));return}this.buffer=a,t(a)})},r.onerror=a=>{console.log("Sound XMLHttpRequest error:",a),e(a)},r.send()}):Promise.reject(new Error(`Missing or invalid URL: ${this.url}`))}play(t=1,e=0,r){if(!this.buffer)return;const a=Bt.context.createBufferSource();a.buffer=this.buffer;const n=Bt.sources.push(a)-1;a.onended=()=>{r&&r(),a.stop(0),Bt.sources.splice(n,1)};const i=Bt.context.createGain();i.gain.value=t,a.connect(i).connect(Bt.context.destination),a.start(e)}stop(){Bt.context.close().catch(t=>{console.error("Error suspending audio context:",t)}),Bt.sources.forEach(t=>{t.stop(0)}),Bt.sources=[]}}const es={clac:"clac/clac.flac",gu:"gu/D2.flac",notes:{E2:"shellopan/E2.flac",F2:"shellopan/F2.flac","F#2":"shellopan/Fs2.flac",G2:"shellopan/G2.flac","G#2":"shellopan/Gs2.flac",A2:"shellopan/A2.flac","A#2":"shellopan/As2.flac",B2:"shellopan/B2.flac",C3:"shellopan/C3.flac","C#3":"shellopan/Cs3.flac",D3:"shellopan/D3.flac","D#3":"shellopan/Ds3.flac",E3:"shellopan/E3.flac",F3:"shellopan/F3.flac","F#3":"shellopan/Fs3.flac",G3:"shellopan/G3.flac","G#3":"shellopan/Gs3.flac",A3:"shellopan/A3.flac","A#3":"shellopan/As3.flac",B3:"shellopan/B3.flac",C4:"shellopan/C4.flac","C#4":"shellopan/Cs4.flac",D4:"shellopan/D4.flac","D#4":"shellopan/Ds4.flac",E4:"shellopan/E4.flac",F4:"shellopan/F4.flac","F#4":"shellopan/Fs4.flac",G4:"shellopan/G4.flac","G#4":"shellopan/Gs4.flac",A4:"shellopan/A4.flac","A#4":"shellopan/As4.flac",B4:"shellopan/B4.flac",C5:"shellopan/C5.flac","C#5":"shellopan/Cs5.flac",D5:"shellopan/D5.flac","D#5":"shellopan/Ds5.flac",E5:"shellopan/E5.flac",F5:"shellopan/F5.flac","F#5":"shellopan/Fs5.flac",G5:"shellopan/G5.flac","G#5":"shellopan/Gs5.flac",A5:"shellopan/A5.flac"}};class se{static _isPlaying=!1;static loadedAudio={};static playingTimeouts=[];static playingNotes=[];static playingAudio=[];static loadAudioFiles(){this.loadAudioFile("clac",es.clac),this.loadAudioFile("gu",es.gu),Object.entries(es.notes).forEach(([t,e])=>{this.loadAudioFile(t,e)})}static playTrack(t,e){this.stop(),this._isPlaying=!0;const r=this.getMsPerBeat(t.bpm,t.beat);let a=r;t.notes.forEach(n=>{this.addPlayingTimeout(()=>se.playNote(n),a),a+=r}),e&&this.addPlayingTimeout(e,a),this.addPlayingTimeout(()=>this.stop(),a)}static stop(){console.info("STOPPING"),this.playingTimeouts.forEach(t=>{clearTimeout(t)}),this.playingTimeouts=[],this.playingNotes.forEach(t=>{t.stopPlaying()}),this.playingNotes=[],this.playingAudio.forEach(t=>{t.stop()}),this.playingAudio=[],this._isPlaying=!1}static playNote(t){switch(t.setPlaying(),this.playingNotes.push(t),!0){case t.isSlap:this.playNoteByType("clac",1,()=>t.stopPlaying());break;case t.isGhost:this.playNoteByType("clac",1,()=>t.stopPlaying());break;case t.isNone:break;default:this.playNoteByType(t.baseName,1,()=>t.stopPlaying());break}}static playNoteByType(t,e=1,r=null){if(!this.loadedAudio[t]){console.error(`Sound type "${t}" s not loaded or does not exist.`);return}this.loadedAudio[t][0].play(e,1,()=>{r&&r()})}static getMsPerBeat(t,e){return 1e3*60/t/e}static addPlayingTimeout(t,e){this.playingTimeouts.push(setTimeout(t,e))}static loadAudioFile(t,e){const r=new Audio(e);r.src=e,r.preload="auto",r.addEventListener("canplaythrough",()=>{const a=new Bt(e);a.load().then(()=>this.loadedAudio[t]=[a,r.duration])})}}var va=F("<button><!></button>");function Ae(s,t){Vt(t,!0);const e=sa(t,["$$slots","$$events","$$legacy"]);var r=va();oa(r,()=>({...e}),void 0,void 0,"svelte-9wjlv9");var a=P(r);Jn(a,()=>t.children??ta),y(r),k(s,r),Gt()}var ma=F('<option class="svelte-jjh050"> </option>'),_a=F('<option class="svelte-jjh050"> </option>'),ga=F('<option class="svelte-jjh050"> </option>'),ba=F('<option class="svelte-jjh050">What?</option>'),ya=F('<div class="note-container svelte-jjh050"><div><div class="note-name svelte-jjh050"> </div> <div><div><!> <!></div> <div class="inputs_container svelte-jjh050"><h3>Note</h3> <div class="select_container svelte-jjh050"><select class="svelte-jjh050"></select></div></div> <div class="inputs_container svelte-jjh050"><h3>Octave</h3> <div class="select_container svelte-jjh050"><select class="svelte-jjh050"></select></div></div> <div class="inputs_container svelte-jjh050"><h3>Alteration</h3> <div class="select_container svelte-jjh050"><select class="svelte-jjh050"></select></div></div></div></div></div>');function ss(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Kt,"$tuneStore",e);let n=E(t,"note",12),i=E(t,"onChange",8,null);const m=Object.values(X),p=[1,2,3,4,5],v=Object.values(Z);function u(){n().refresh(),i()&&i()(n()),se.playNoteByType(n().fullName),Kt.set(a().clone())}function D(H){const I=a();I.removeNote(H),Kt.set(I.clone())}Fe(()=>n().refreshHtmlElement()),zs(()=>n().refreshHtmlElement()),Wt();var G=ya(),_=P(G),f=P(_),g=P(f,!0);y(f);var l=B(f,2);Yt(l,1,"note-menu  svelte-jjh050");var T=P(l),x=P(T);Ae(x,{onclick:()=>se.playNoteByType(n().fullName),children:(H,I)=>{Pe();var R=we("🔊");k(H,R)},$$slots:{default:!0}});var O=B(x,2);Ae(O,{onclick:()=>D(n()),children:(H,I)=>{Pe();var R=we("🗑");k(H,R)},$$slots:{default:!0}}),y(T);var q=B(T,2),w=B(P(q),2),A=P(w);z(()=>{n(),le(()=>{})}),Ft(A,5,()=>m,H=>H,(H,I)=>{var R=ma(),ut=P(R,!0);y(R);var et={};z(()=>{ft(ut,o(I)),et!==(et=o(I))&&(R.value=(R.__value=o(I))??"")}),k(H,R)}),y(A),y(w),y(q);var N=B(q,2),b=B(P(N),2),S=P(b);z(()=>{n(),le(()=>{})}),Ft(S,5,()=>p,H=>H,(H,I)=>{var R=_a(),ut=P(R,!0);y(R);var et={};z(()=>{ft(ut,o(I)),et!==(et=o(I))&&(R.value=(R.__value=o(I))??"")}),k(H,R)}),y(S),y(b),y(N);var $=B(N,2),L=B(P($),2),V=P(L);z(()=>{n(),le(()=>{})}),Ft(V,5,()=>v,H=>H,(H,I)=>{var R=ga(),ut=P(R,!0);y(R);var et={};z(()=>{ft(ut,o(I)),et!==(et=o(I))&&(R.value=(R.__value=o(I))??"")}),k(H,R)},H=>{var I=ba();k(H,I)}),y(V),y(L),y($),y(l),y(_),y(G),z(()=>{nt(G,"data-handpan-note",(d(n()),M(()=>n().fullName))),Yt(_,1,`note ${d(n()),M(()=>n().isPlaying?"playing":"")??""}`,"svelte-jjh050"),ft(g,(d(n()),M(()=>n().fullName))),nt(A,"size",M(()=>m.length)),nt(S,"size",M(()=>p.length)),nt(V,"size",M(()=>v.length))}),xe(A,()=>n().note,H=>n(n().note=H,!0)),tt("change",A,u),xe(S,()=>n().octave,H=>n(n().octave=H,!0)),tt("change",S,u),xe(V,()=>n().alteration,H=>n(n().alteration=H,!0)),tt("change",V,u),k(s,G),Gt(),r()}var Na=F('<div class="handpan-note-container svelte-dfdpd"><button class="handpan-note svelte-dfdpd">&plus;</button></div>');function Ne(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Kt,"$tuneStore",e);let n=E(t,"position",8),i=E(t,"type",8),m=a();function p(){m.addNoteAt(n(),i()),Kt.set(m.clone())}Wt();var v=Na(),u=P(v);u.__click=p,y(v),k(s,v),Gt(),r()}ea(["click"]);var Ea=F("<!> <!>",1),Pa=F("<!> <!>",1),wa=F("<!> <!>",1),Aa=F('<h2>Tune</h2> <h3>Top notes:</h3> <div class="notes-list"><!> <!></div> <h3>Dings:</h3> <div class="notes-list"><!> <!></div> <h3>Bottom notes:</h3> <div class="notes-list"><!> <!></div>',1);function Ta(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Kt,"$tuneStore",e);Wt();var n=Aa(),i=B(It(n),4),m=P(i);Ne(m,{position:1,get type(){return J.topNote}});var p=B(m,2);Ft(p,3,()=>a().topNotes,g=>g,(g,l,T)=>{var x=Ea(),O=It(x);ss(O,{get note(){return a().topNotes[o(T)]},set note(w){a().topNotes[o(T)]=w,le(()=>a()),Je(e,"$tuneStore")},$$legacy:!0});var q=B(O,2);{let w=bt(()=>o(T)+1);Ne(q,{get position(){return o(w)},get type(){return J.topNote}})}k(g,x)}),y(i);var v=B(i,4),u=P(v);Ne(u,{position:1,get type(){return J.ding}});var D=B(u,2);Ft(D,3,()=>a().dings,g=>g,(g,l,T)=>{var x=Pa(),O=It(x);ss(O,{get note(){return a().dings[o(T)]},set note(w){a().dings[o(T)]=w,le(()=>a()),Je(e,"$tuneStore")},$$legacy:!0});var q=B(O,2);{let w=bt(()=>o(T)+1);Ne(q,{get position(){return o(w)},get type(){return J.ding}})}k(g,x)}),y(v);var G=B(v,4),_=P(G);Ne(_,{position:1,get type(){return J.bottomNote}});var f=B(_,2);Ft(f,3,()=>a().bottomNotes,g=>g,(g,l,T)=>{var x=wa(),O=It(x);ss(O,{get note(){return a().bottomNotes[o(T)]},set note(w){a().bottomNotes[o(T)]=w,le(()=>a()),Je(e,"$tuneStore")},$$legacy:!0});var q=B(O,2);{let w=bt(()=>o(T)+1);Ne(q,{get position(){return o(w)},get type(){return J.bottomNote}})}k(g,x)}),y(G),k(s,n),Gt(),r()}function Gs(s){return Object.prototype.toString.call(s)==="[object Date]"}function us(s,t,e,r){if(typeof e=="number"||Gs(e)){const a=r-e,n=(e-t)/(s.dt||1/60),i=s.opts.stiffness*a,m=s.opts.damping*n,p=(i-m)*s.inv_mass,v=(n+p)*s.dt;return Math.abs(v)<s.opts.precision&&Math.abs(a)<s.opts.precision?r:(s.settled=!1,Gs(e)?new Date(e.getTime()+v):e+v)}else{if(Array.isArray(e))return e.map((a,n)=>us(s,t[n],e[n],r[n]));if(typeof e=="object"){const a={};for(const n in e)a[n]=us(s,t[n],e[n],r[n]);return a}else throw new Error(`Cannot spring ${typeof e} values`)}}function ka(s,t={}){const e=hs(s),{stiffness:r=.15,damping:a=.8,precision:n=.01}=t;let i,m,p,v=s,u=s,D=1,G=0,_=!1;function f(l,T={}){u=l;const x=p={};return s==null||T.hard||g.stiffness>=1&&g.damping>=1?(_=!0,i=Ht.now(),v=l,e.set(s=u),Promise.resolve()):(T.soft&&(G=1/((T.soft===!0?.5:+T.soft)*60),D=0),m||(i=Ht.now(),_=!1,m=ca(O=>{if(_)return _=!1,m=null,!1;D=Math.min(D+G,1);const q=Math.min(O-i,1e3/30),w={inv_mass:D,opts:g,settled:!0,dt:q*60/1e3},A=us(w,v,s,u);return i=O,v=s,e.set(s=A),w.settled&&(m=null),!w.settled})),new Promise(O=>{m.promise.then(()=>{x===p&&O()})}))}const g={set:f,update:(l,T)=>f(l(u,s),T),subscribe:e.subscribe,stiffness:r,damping:a,precision:n};return g}function pe(s){return typeof s=="number"&&!isNaN(s)&&isFinite(s)}const yt=(s,t=2)=>parseFloat((+s).toFixed(t)),$s=function(s,t,e){return s<=t?t:s>=e?e:s},Nt=function(s,t,e,r=2){let a=(s-t)/(e-t)*100;return isNaN(a)||a<=0?0:a>=100?100:yt(a,r)},Ba=function(s,t,e){return(e-t)/100*s+t},Jt=function(s,t,e,r,a=2,n=null){if(s=pe(s)?s:n?.[0]??t,s<=(n?.[0]??t)||s>=(n?.[1]??e))return s=$s(s,n?.[0]??t,n?.[1]??e);let i=(s-t)%r,m=s-i;return Math.abs(i)*2>=r?m+=i>0?r:-r:s>=e-i&&(m=e),m=$s(m,n?.[0]??t,n?.[1]??e),yt(m,a)},Sa=(s="")=>`${s}`.replace(/<[^>]*>/g,""),Ee=s=>{const{clientX:t,clientY:e}="touches"in s?s.touches[0]||s.changedTouches[0]:s;return{x:t,y:e}},Os=s=>{if(!s)return-1;for(var t=0;s=s.previousElementSibling;)t++;return t},ns=(s,t,e)=>{if(e==="min")return t[0]>s;if(e==="max")return t[0]<s;if(e)return t[0]<s&&t[1]>s},as=(s,t)=>t?s<t[0]||s>t[1]:!1,os=(s,t,e=2)=>t.some(r=>yt(r,e)===yt(s,e)),js=(s,t,e,r,a,n=2)=>yt(t+s*a*r,n),Ge=(s,t,e,r,a,n)=>{const i=s.getBoundingClientRect();let m=0,p=0,v=0;return e?(m=t.y-i.top,p=m/i.height*100,p=r?p:100-p):(m=t.x-i.left,p=m/i.width*100,p=r?100-p:p),v=Ba(p,a,n),{pointerVal:v,pointerPercent:p}};var xa=F('<span class="rsPipValPrefix"> </span>'),Da=F('<span class="rsPipValSuffix"> </span>'),Fa=F('<span class="rsPipVal"><!> <!> <!></span>'),Ma=F("<span><!></span>"),Ca=F('<span class="rsPipValPrefix"> </span>'),Ha=F('<span class="rsPipValSuffix"> </span>'),Ia=F('<span class="rsPipVal"><!> <!> <!></span>'),Va=F("<span><!></span>"),Ga=F('<span class="rsPipValPrefix"> </span>'),$a=F('<span class="rsPipValSuffix"> </span>'),Oa=F('<span class="rsPipVal"><!> <!> <!></span>'),ja=F("<span><!></span>"),La=F("<div><!> <!> <!></div>");function Ra(s,t){Vt(t,!1);const e=dt(),r=dt();let a=E(t,"range",8,!1),n=E(t,"min",8,0),i=E(t,"max",8,100),m=E(t,"step",8,1),p=E(t,"value",24,()=>(i()+n())/2),v=E(t,"values",24,()=>[p()]),u=E(t,"vertical",8,!1),D=E(t,"reversed",8,!1),G=E(t,"hoverable",8,!0),_=E(t,"disabled",8,!1),f=E(t,"limits",8,null),g=E(t,"pipstep",24,()=>{}),l=E(t,"all",8,!0),T=E(t,"first",24,()=>{}),x=E(t,"last",24,()=>{}),O=E(t,"rest",24,()=>{}),q=E(t,"prefix",8,""),w=E(t,"suffix",8,""),A=E(t,"formatter",8,(ot,U,gt)=>ot),N=E(t,"precision",8,2),b=E(t,"focus",8),S=E(t,"orientationStart",8),$=E(t,"moveHandle",8),L=null,V=dt(0);const H=500;let I=dt(1);function R(ot){L=Ee(ot)}function ut(ot,U){const gt=Ee(U);!_()&&L&&(Math.sqrt(Math.pow(L.x-gt.x,2)+Math.pow(L.y-gt.y,2))<=5&&$()(null,ot),L=null)}ct(()=>d(u()),()=>{j(e,u()?50:100)}),ct(()=>(d(i()),d(n()),d(m()),o(e)),()=>{j(r,(i()-n())/m()>=o(e))}),ct(()=>(o(I),d(g()),o(r),d(i()),d(n()),o(e),o(V),d(m())),()=>{if(j(I,g()??(o(r)?(i()-n())/(o(e)/5):1)),j(V,Math.ceil((i()-n())/(m()*o(I)))),o(V)>H)for(console.warn('RangePips: You are trying to render too many pips. This will cause performance issues. Try increasing the "pipstep" prop to reduce the number of pips shown.');o(V)>=H;)j(I,o(I)+o(I)),j(V,Math.ceil((i()-n())/(m()*o(I))))}),ps(),Wt();var et=La();let kt;var Mt=P(et);{var $t=ot=>{var U=Ma();let gt;nt(U,"data-index",0);var ae=P(U);{var oe=Y=>{var K=Fa(),ht=P(K);{var Et=at=>{var rt=xa(),W=P(rt,!0);y(rt),z(()=>ft(W,q())),k(at,rt)};Q(ht,at=>{q()&&at(Et)})}var Pt=B(ht,2);_e(Pt,()=>(d(A()),d(yt),d(n()),d(N()),M(()=>A()(yt(n(),N()),0,0))));var pt=B(Pt,2);{var it=at=>{var rt=Da(),W=P(rt,!0);y(rt),z(()=>ft(W,w())),k(at,rt)};Q(pt,at=>{w()&&at(it)})}y(K),k(Y,K)};Q(ae,Y=>{(l()==="label"||T()==="label")&&Y(oe)})}y(U),z((Y,K)=>{gt=Yt(U,1,"rsPip rsPip--first",null,gt,Y),me(U,`${S()??""}: 0%;`),nt(U,"data-val",K)},[()=>({rsSelected:os(n(),v(),N()),rsInRange:ns(n(),v(),a()),rsOutOfLimit:as(n(),f())}),()=>(d(yt),d(n()),d(N()),M(()=>yt(n(),N())))]),tt("pointerdown",U,Y=>{R(Y)}),tt("pointerup",U,Y=>{ut(n(),Y)}),k(ot,U)};Q(Mt,ot=>{(l()&&T()!==!1||T())&&ot($t)})}var Ot=B(Mt,2);{var ne=ot=>{var U=ls(),gt=It(U);Ft(gt,1,()=>(o(V),M(()=>Array(o(V)))),Js,(ae,oe,Y)=>{const K=bt(()=>(d(js),d(n()),d(i()),o(I),d(m()),d(N()),M(()=>js(Y,n(),i(),o(I),m(),N()))));var ht=ls(),Et=It(ht);{var Pt=pt=>{var it=Va();let at;nt(it,"data-index",Y);var rt=P(it);{var W=vt=>{var St=Ia(),Te=P(St);{var jt=Lt=>{var Rt=Ca(),be=P(Rt,!0);y(Rt),z(()=>ft(be,q())),k(Lt,Rt)};Q(Te,Lt=>{Lt(jt)})}var Me=B(Te,2);_e(Me,()=>(d(A()),d(o(K)),d(Nt),d(n()),d(i()),d(N()),M(()=>A()(o(K),Y,Nt(o(K),n(),i(),N())))));var qe=B(Me,2);{var ke=Lt=>{var Rt=Ha(),be=P(Rt,!0);y(Rt),z(()=>ft(be,w())),k(Lt,Rt)};Q(qe,Lt=>{Lt(ke)})}y(St),k(vt,St)};Q(rt,vt=>{(l()==="label"||O()==="label")&&vt(W)})}y(it),z((vt,St)=>{at=Yt(it,1,"rsPip",null,at,vt),me(it,`${S()??""}: ${St??""}%;`),nt(it,"data-val",o(K))},[()=>({rsSelected:os(o(K),v(),N()),rsInRange:ns(o(K),v(),a()),rsOutOfLimit:as(o(K),f())}),()=>(d(Nt),d(o(K)),d(n()),d(i()),d(N()),M(()=>Nt(o(K),n(),i(),N())))]),tt("pointerdown",it,vt=>{R(vt)}),tt("pointerup",it,vt=>{ut(o(K),vt)}),k(pt,it)};Q(Et,pt=>{o(K)>n()&&o(K)<i()&&pt(Pt)})}k(ae,ht)}),k(ot,U)};Q(Ot,ot=>{(l()&&O()!==!1||O())&&ot(ne)})}var Re=B(Ot,2);{var ze=ot=>{var U=ja();let gt;var ae=P(U);{var oe=Y=>{var K=Oa(),ht=P(K);{var Et=at=>{var rt=Ga(),W=P(rt,!0);y(rt),z(()=>ft(W,q())),k(at,rt)};Q(ht,at=>{q()&&at(Et)})}var Pt=B(ht,2);_e(Pt,()=>(d(A()),d(yt),d(i()),d(N()),o(V),M(()=>A()(yt(i(),N()),o(V),100))));var pt=B(Pt,2);{var it=at=>{var rt=$a(),W=P(rt,!0);y(rt),z(()=>ft(W,w())),k(at,rt)};Q(pt,at=>{w()&&at(it)})}y(K),k(Y,K)};Q(ae,Y=>{(l()==="label"||x()==="label")&&Y(oe)})}y(U),z((Y,K)=>{gt=Yt(U,1,"rsPip rsPip--last",null,gt,Y),me(U,`${S()??""}: 100%;`),nt(U,"data-val",K),nt(U,"data-index",o(V))},[()=>({rsSelected:os(i(),v(),N()),rsInRange:ns(i(),v(),a()),rsOutOfLimit:as(i(),f())}),()=>(d(yt),d(i()),d(N()),M(()=>yt(i(),N())))]),tt("pointerdown",U,Y=>{R(Y)}),tt("pointerup",U,Y=>{ut(i(),Y)}),k(ot,U)};Q(Re,ot=>{(l()&&x()!==!1||x())&&ot(ze)})}y(et),z(ot=>kt=Yt(et,1,"rangePips",null,kt,ot),[()=>({rsDisabled:_(),rsHoverable:G(),rsVertical:u(),rsReversed:D(),rsFocus:b()})]),k(s,et),Gt()}var za=F('<span class="rangeFloatPrefix"> </span>'),qa=F('<span class="rangeFloatSuffix"> </span>'),Xa=F('<span class="rangeFloat"><!><!><!></span>'),Ua=F('<span role="slider"><span class="rangeNub"></span> <!></span>'),Ya=F('<span class="rangeLimit"></span>'),Ka=F('<span class="rangeFloatPrefix"> </span>'),Wa=F('<span class="rangeFloatSuffix"> </span>'),Qa=F('<span class="rangeFloatPrefix"> </span>'),Za=F('<span class="rangeFloatSuffix"> </span>'),Ja=F("<!><!><!> <!><!><!>",1),to=F('<span class="rangeFloat"><!></span>'),eo=F("<span><!></span>"),so=F('<div role="none"><!> <!> <!> <!></div>');function Ls(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(o(jt),"$springPositions",e),n=dt(),i=dt(),m=dt();let p=E(t,"slider",28,()=>{}),v=E(t,"precision",8,2),u=E(t,"range",8,!1),D=E(t,"pushy",8,!1),G=E(t,"draggy",8,!1),_=E(t,"min",12,0),f=E(t,"max",12,100),g=E(t,"step",12,1),l=E(t,"values",28,()=>[yt((f()+_())/2,v())]),T=E(t,"value",28,()=>l()[0]),x=E(t,"vertical",8,!1),O=E(t,"float",8,!1),q=E(t,"rangeFloat",8,!1),w=E(t,"reversed",8,!1),A=E(t,"hoverable",8,!0),N=E(t,"disabled",8,!1),b=E(t,"limits",8,null),S=E(t,"rangeGapMin",12,0),$=E(t,"rangeGapMax",12,1/0),L=E(t,"pips",8,!1),V=E(t,"pipstep",24,()=>{}),H=E(t,"all",8,!0),I=E(t,"first",24,()=>{}),R=E(t,"last",24,()=>{}),ut=E(t,"rest",24,()=>{}),et=E(t,"prefix",8,""),kt=E(t,"suffix",8,""),Mt=E(t,"formatter",12,(c,h,C)=>c),$t=E(t,"handleFormatter",28,Mt),Ot=E(t,"rangeFormatter",12,null),ne=E(t,"ariaLabels",28,()=>[]),Re=E(t,"id",24,()=>{}),ze=E(t,"class",8,""),ot=E(t,"style",24,()=>{}),U=E(t,"darkmode",8,!1),gt=E(t,"springValues",24,()=>({stiffness:.15,damping:.4})),ae=E(t,"spring",8,!0);const oe=Cn();let Y=dt(!1),K=dt(0),ht=dt(!1),Et=!1,Pt=dt(!1),pt=!1,it=dt(!1),at=[1,1],rt=!1,W=dt(-1),vt=[],St=[],Te=dt(0),jt=dt();const Me=()=>{Rt(),l()[0]!==T()&&l(l()[0]=T(),!0)},qe=()=>{Lt(),T()!==l()[0]&&T(l()[0])},ke=()=>{pe(_())||(_(0),console.error("'min' prop must be a valid finite Number")),pe(f())||(f(100),console.error("'max' prop must be a valid finite Number")),_()>=f()&&(_(0),f(100),console.error("'min' prop should be less than 'max'")),_(yt(_(),v())),f(yt(f(),v()))},Lt=()=>{pe(T())||(T((f()+_())/2),console.error("'value' prop should be a Number"))},Rt=()=>{Array.isArray(l())?l().some(c=>!pe(c))&&(l(l().map(c=>pe(c)?c:(f()+_())/2)),console.error("'values' prop should be an Array of Numbers")):(l([T()]),console.error("'values' prop should be an Array"))},be=()=>{(!pe(g())||g()<=0)&&(g(1),console.error("'step' prop must be a positive Number"))},nn=()=>{l().length>1&&!Array.isArray(ne())&&(ne([]),console.warn("'ariaLabels' prop should be an Array"))},Xe=()=>{if(l(l().map(c=>Jt(c,_(),f(),g(),v(),b()))),S()<0&&S(0),$()<0&&$(1/0),S()>$()&&S($()),$()<1/0){const c=Jt(l()[0]+$(),_(),f(),g(),v(),b());l()[1]>c&&l(l()[1]=c,!0)}if(S()>0){const c=Jt(l()[0]+S(),_(),f(),g(),v(),b());l()[1]<c&&l(l()[1]=c,!0)}},Ce=()=>{(Mt()===null||Mt()===void 0)&&(console.error("formatter must be a function"),Mt((c,h,C)=>c)),($t()===null||$t()===void 0)&&(console.error("handleFormatter must be a function"),$t(Mt())),Ot()===void 0&&(console.error("rangeFormatter must be a function, or null"),Ot(null))};ke(),Lt(),Rt(),be(),Xe(),Ce();const an=c=>{aa(j(jt,ka(c.map(h=>Nt(h,_(),f())),gt())),"$springPositions",e)},on=c=>{requestAnimationFrame(()=>{o(jt).set(c.map(h=>Nt(h,_(),f())),{hard:!ae()})})},rn=()=>{o(jt)&&(Hs(jt,o(jt).stiffness=gt().stiffness??.15),Hs(jt,o(jt).damping=gt().damping??.4))};function ln(c){return requestAnimationFrame(()=>{if(c){const h=c.getBoundingClientRect();j(Te,x()?h.height:h.width)}})}let Ue,Be;Fe(()=>(p()&&(Ue=new ResizeObserver(c=>{Be&&cancelAnimationFrame(Be),Be=ln(c[0].target)}),Ue.observe(p()),setTimeout(()=>{j(Y,!0)},16)),()=>{Be&&cancelAnimationFrame(Be),Ue?.disconnect?.(),j(Y,!1)}));function cn(c){if(!p())return!1;const h=p().querySelectorAll(".handle"),C=Array.prototype.includes.call(h,c),st=Array.prototype.some.call(h,mt=>mt.contains(c));return C||st}function dn(c,h){return h==="min"||h==="max"?c.slice(0,1):h?c.slice(0,2):c}function fn(c){if(!p())return 0;const{pointerVal:h}=Ge(p(),c,x(),w(),_(),f());let C=0;return u()===!0&&l()[0]===l()[1]?h>l()[1]?C=1:C=0:C=l().indexOf([...l()].sort((st,mt)=>Math.abs(h-st)-Math.abs(h-mt))[0]),C}function Ye(c){if(!p()||!Et)return;const{pointerVal:h}=Ge(p(),c,x(),w(),_(),f());re(o(W),h)}function un(c){if(!p()||!G()||!pt||u()==="min"||u()==="max")return;const{pointerVal:h}=Ge(p(),c,x(),w(),_(),f());at=[l()[0]-h,l()[1]-h]}function hn(c){if(!p()||!G()||!pt||u()==="min"||u()==="max")return;const{pointerVal:h}=Ge(p(),c,x(),w(),_(),f());j(W,-1),re(0,h+at[0],!1),re(1,h+at[1],!0)}function re(c,h,C=!0){return h=Jt(h,_(),f(),g(),v(),b()),c===null&&(c=o(W)),u()===!0&&(c===0?h>l()[1]-S()?D()&&h<=(b()?.[1]??f())-S()?l(l()[1]=h+S(),!0):h=l()[1]-S():h<l()[1]-$()&&(D()?l(l()[1]=h+$(),!0):h=l()[1]-$()):c===1&&(h<l()[0]+S()?D()&&h>=(b()?.[0]??_())+S()?l(l()[0]=h-S(),!0):h=l()[0]+S():h>l()[0]+$()&&(D()?l(l()[0]=h-$(),!0):h=l()[0]+$()))),l()[c]!==h&&l(l()[c]=Jt(h,_(),f(),g(),v(),b()),!0),C&&pn(l()),h}function pn(c){St.some((C,st)=>C!==c[st])&&(wn(),St=[...c])}function vn(c){return u()==="min"?0:c[0]}function mn(c){return u()==="max"?100:u()==="min"?c[0]:c[1]}function _n(c){c.target,rt&&(j(ht,!1),Et=!1,j(Pt,!1),pt=!1,j(it,!1))}function gn(c){const h=c.target;N()||(j(W,Os(h)),j(ht,!0))}function bn(c){if(!N()){let h=!1;const C=Os(c.target);let st=g();if(c.ctrlKey||c.metaKey){const mt=(f()-_())/100;st=Math.max(g(),Math.round(mt/g())*g())}else if(c.shiftKey||c.key==="PageUp"||c.key==="PageDown"){const mt=(f()-_())/10;st=Math.max(g(),Math.round(mt/g())*g())}switch(c.key){case"PageUp":case"ArrowRight":case"ArrowUp":re(C,l()[C]+st),h=!0;break;case"PageDown":case"ArrowLeft":case"ArrowDown":re(C,l()[C]-st),h=!0;break;case"Home":re(C,_()),h=!0;break;case"End":re(C,f()),h=!0;break}h&&(c.preventDefault(),c.stopPropagation())}}function _s(c){if(!N()){const h=c.target,C=Ee(c);j(ht,!0),h.matches(".rangeBar")&&u()===!0&&G()?(Et=!1,j(Pt,!1),j(W,-1),pt=!0,j(it,!0),un(C)):(Et=!0,j(Pt,!0),j(W,fn(C)),c.type==="touchstart"&&!h.matches(".rsPipVal")&&Ye(C)),vt=l().map(st=>Jt(st,_(),f(),g(),v(),b())),St=[...vt],Pn()}}function gs(c){c.type==="touchend"&&Ns(),j(Pt,!1),j(it,!1)}function bs(c){const h=c.target;rt=!1,p()&&o(ht)&&h!==p()&&!p().contains(h)&&j(ht,!1)}function ys(c){N()||(Et?Ye(Ee(c)):pt&&hn(Ee(c)))}function yn(c){if(!N()){const h=c.target;Et&&p()&&(h===p()||p().contains(h))&&(j(ht,!0),!cn(h)&&!h.matches(".rsPipVal")&&Ye(Ee(c))),(Et||pt)&&Ns()}Et=!1,j(Pt,!1),pt=!1,j(it,!1)}function Nn(c){Et=!1,j(Pt,!1),pt=!1,j(it,!1)}function En(c){const h=c.target;!N()&&p()&&(h===p()||p().contains(h))&&(rt=!0)}function Pn(){N()||oe("start",{activeHandle:o(W),value:vt[o(W)],values:vt})}function Ns(){if(N())return;const c=pt?vt:vt[o(W)];oe("stop",{activeHandle:o(W),startValue:c,value:l()[o(W)],values:l().map(h=>Jt(h,_(),f(),g(),v(),b()))})}function wn(){if(N())return;const c=pt?vt:vt[o(W)],h=typeof St>"u"?c:pt?St:St[o(W)];oe("change",{activeHandle:o(W),startValue:c,previousValue:h,value:l()[o(W)],values:l().map(C=>Jt(C,_(),f(),g(),v(),b()))})}function An(c,h){const C=Nt(c,_(),f(),v()),st=$t()(c,h,C),mt=Sa(String(st));return`${et()}${mt}${kt()}`}ct(()=>d(T()),()=>{T(),Me()}),ct(()=>(d(u()),d(_()),d(f()),d(g()),d(v()),d(b()),o(K),d(p()),d(l()),d(T())),()=>{((c,h)=>{const st=dn(c,u()).map(mt=>Jt(mt,_(),f(),g(),v(),b()));(c.length!==st.length||!c.every((mt,zt)=>yt(mt,v())===st[zt]))&&(c=st),o(K)!==c.length?an(c):p()&&on(c),l(c),j(K,c.length)})(l(),T())}),ct(()=>d(l()),()=>{l(),qe()}),ct(()=>d(ne()),()=>{ne(),nn()}),ct(()=>d(_()),()=>{_(),ke()}),ct(()=>d(f()),()=>{f(),ke()}),ct(()=>d(g()),()=>{g(),be()}),ct(()=>d(S()),()=>{S(),Xe()}),ct(()=>d($()),()=>{$(),Xe()}),ct(()=>d(Mt()),()=>{Mt(),Ce()}),ct(()=>d($t()),()=>{$t(),Ce()}),ct(()=>d(Ot()),()=>{Ot(),Ce()}),ct(()=>d(gt()),()=>{gt(),rn()}),ct(()=>(d(u()),d(l())),()=>{j(n,u()===!0&&l().length===2||(u()==="min"||u()==="max")&&l().length===1)}),ct(()=>(d(x()),d(w())),()=>{j(i,x()?w()?"top":"bottom":w()?"right":"left")}),ct(()=>(d(x()),d(w())),()=>{j(m,x()?w()?"bottom":"top":w()?"left":"right")}),ps(),Wt();var Ct=so();tt("mousedown",he,bs),tt("touchstart",he,bs),tt("mousemove",he,ys),tt("touchmove",he,ys),tt("mouseup",he,yn),tt("touchend",he,Nn),tt("keydown",he,En);let Es;var Ps=P(Ct);Ft(Ps,1,l,Js,(c,h,C,st)=>{const mt=bt(()=>o(ht)&&o(W)===C?"z-index: 3; ":""),zt=bt(()=>o(Y)?"":"opacity: 0; ");var lt=Ua();let He;nt(lt,"data-handle",C);var Ke=B(P(lt),2);{var ce=ie=>{const de=bt(()=>(d(Nt),o(h),d(_()),d(f()),d(v()),M(()=>Nt(o(h),_(),f(),v())))),qt=bt(()=>(d($t()),o(h),d(o(de)),M(()=>$t()(o(h),C,o(de)))));var fe=Xa(),Ie=P(fe);{var We=xt=>{var Zt=za(),ye=P(Zt,!0);y(Zt),z(()=>ft(ye,et())),k(xt,Zt)};Q(Ie,xt=>{et()&&xt(We)})}var Ve=B(Ie);_e(Ve,()=>o(qt));var Xt=B(Ve);{var Qt=xt=>{var Zt=qa(),ye=P(Zt,!0);y(Zt),z(()=>ft(ye,kt())),k(xt,Zt)};Q(Xt,xt=>{kt()&&xt(Qt)})}y(fe),k(ie,fe)};Q(Ke,ie=>{O()&&ie(ce)})}y(lt),z((ie,de)=>{He=Yt(lt,1,"rangeHandle",null,He,ie),me(lt,(a(),d(o(mt)),d(o(zt)),M(()=>`--handle-pos: ${a()[C]};${o(mt)}${o(zt)}`))),nt(lt,"aria-label",(d(ne()),M(()=>ne()[C]))),nt(lt,"aria-valuemin",(d(u()),d(l()),d(_()),M(()=>u()===!0&&C===1?l()[0]:_()))),nt(lt,"aria-valuemax",(d(u()),d(l()),d(f()),M(()=>u()===!0&&C===0?l()[1]:f()))),nt(lt,"aria-valuenow",o(h)),nt(lt,"aria-valuetext",de),nt(lt,"aria-orientation",x()?"vertical":"horizontal"),nt(lt,"aria-disabled",N()),nt(lt,"tabindex",N()?-1:0)},[()=>({rsActive:o(ht)&&o(W)===C,rsPress:o(Pt)&&o(W)===C}),()=>(o(h),M(()=>An(o(h),C)))]),tt("blur",lt,_n),tt("focus",lt,gn),tt("keydown",lt,bn),k(c,lt)});var ws=B(Ps,2);{var Tn=c=>{var h=Ya();z((C,st)=>me(h,`${o(i)??""}: ${C??""}%;
             ${o(m)??""}: ${st??""}%;`),[()=>(d(Nt),d(b()),d(_()),d(f()),d(v()),M(()=>Nt(b()[0],_(),f(),v()))),()=>(d(Nt),d(b()),d(_()),d(f()),d(v()),M(()=>100-Nt(b()[1],_(),f(),v())))]),k(c,h)};Q(ws,c=>{b()&&c(Tn)})}var As=B(ws,2);{var kn=c=>{const h=bt(()=>(a(),M(()=>vn(a())))),C=bt(()=>(a(),M(()=>mn(a())))),st=bt(()=>o(C)-o(h)),mt=bt(()=>o(Y)?"":"opacity: 0; ");var zt=eo();let lt;var He=P(zt);{var Ke=ce=>{const ie=bt(()=>(d(u()),d(_()),d(l()),M(()=>u()==="min"?_():l()[0]))),de=bt(()=>(d(u()),d(f()),d(l()),M(()=>u()==="max"?f():u()==="min"?l()[0]:l()[1]))),qt=bt(()=>{const[Xt,Qt]=w()?[o(de),o(ie)]:[o(ie),o(de)];return{first:Xt,second:Qt}});var fe=to(),Ie=P(fe);{var We=Xt=>{var Qt=ls(),xt=It(Qt);_e(xt,()=>(d(Ot()),d(o(qt).first),d(o(qt).second),d(Nt),d(_()),d(f()),d(v()),M(()=>Ot()(o(qt).first,o(qt).second,Nt(o(qt).first,_(),f(),v()),Nt(o(qt).second,_(),f(),v()))))),k(Xt,Qt)},Ve=Xt=>{var Qt=Ja(),xt=It(Qt);{var Zt=wt=>{var At=Ka(),ue=P(At,!0);y(At),z(()=>ft(ue,et())),k(wt,At)};Q(xt,wt=>{et()&&wt(Zt)})}var ye=B(xt);_e(ye,()=>o(qt).first);var Ts=B(ye);{var xn=wt=>{var At=Wa(),ue=P(At,!0);y(At),z(()=>ft(ue,kt())),k(wt,At)};Q(Ts,wt=>{kt()&&wt(xn)})}var ks=B(Ts);ks.nodeValue="  -  ";var Bs=B(ks);{var Dn=wt=>{var At=Qa(),ue=P(At,!0);y(At),z(()=>ft(ue,et())),k(wt,At)};Q(Bs,wt=>{et()&&wt(Dn)})}var Ss=B(Bs);_e(Ss,()=>o(qt).second);var Fn=B(Ss);{var Mn=wt=>{var At=Za(),ue=P(At,!0);y(At),z(()=>ft(ue,kt())),k(wt,At)};Q(Fn,wt=>{kt()&&wt(Mn)})}k(Xt,Qt)};Q(Ie,Xt=>{Ot()?Xt(We):Xt(Ve,!1)})}y(fe),k(ce,fe)};Q(He,ce=>{q()&&ce(Ke)})}y(zt),z(ce=>{lt=Yt(zt,1,"rangeBar",null,lt,ce),me(zt,`--range-start:${o(h)};--range-end:${o(C)};--range-size:${o(st)};${o(mt)};`)},[()=>({rsPress:o(it)})]),k(c,zt)};Q(As,c=>{o(n)&&c(kn)})}var Bn=B(As,2);{var Sn=c=>{Ra(c,{get values(){return l()},get min(){return _()},get max(){return f()},get step(){return g()},get range(){return u()},get vertical(){return x()},get reversed(){return w()},get orientationStart(){return o(i)},get hoverable(){return A()},get disabled(){return N()},get limits(){return b()},get all(){return H()},get first(){return I()},get last(){return R()},get rest(){return ut()},get pipstep(){return V()},get prefix(){return et()},get suffix(){return kt()},get formatter(){return Mt()},get precision(){return v()},get focus(){return o(ht)},moveHandle:re})};Q(Bn,c=>{L()&&c(Sn)})}y(Ct),na(Ct,c=>p(c),()=>p()),z(c=>{nt(Ct,"id",Re()),Es=Yt(Ct,1,`rangeSlider ${ze()??""}`,null,Es,c),me(Ct,`--slider-length: ${o(Te)};${ot()??""}`)},[()=>({rsDark:U()==="force",rsAutoDark:U()==="auto",rsRange:o(n),rsDrag:o(n)&&G(),rsMin:o(n)&&u()==="min",rsMax:o(n)&&u()==="max",rsDisabled:N(),rsHoverable:A(),rsVertical:x(),rsReversed:w(),rsFocus:o(ht),rsPips:L(),rsPipLabels:H()==="label"||I()==="label"||R()==="label"||ut()==="label"})]),tt("mousedown",Ct,_s),tt("mouseup",Ct,gs),tt("touchstart",Ct,Vs(_s)),tt("touchend",Ct,Vs(gs)),k(s,Ct),Gt(),r()}class De{_id;type;position;_note;_htmlElement=null;get id(){return this._id}get note(){return this._note}set note(t){if(!t&&this.type===Tt.note){console.error('Tried to set empty note to TrackNote of type "note". Note is mandatory here.');return}this._note=t,this.refresh()}get htmlElement(){if(!this._htmlElement)throw new Error("Tried to access HTML element of track note, but it is not set.You might want to call refreshHtmlElement() first.");return this._htmlElement}set htmlElement(t){if(!t){console.error("Tried to set empty html element to track note.");return}this._htmlElement=t}get baseName(){switch(!0){case this.isSlap:return"×";case this.isGhost:return"👻";case this.isNone:return"—";default:return this._note?.fullName??"-"}}get displayName(){if(!this.isNote)throw new Error(`Note name for the music player can only be retrieved on notes. Current note is "${this.type}".`);if(!this._note)throw new Error(`Tried to get display name of track note, but it has no handpan note associated to it. Type: ${this.type}.`);return this.position.toString()+"-"+this._note.fullName}get isNote(){return this.type===Tt.note}get isSlap(){return this.type===Tt.slap}get isGhost(){return this.type===Tt.ghost}get isNone(){return this.type===Tt.none}constructor(t,e,r){if(!t&&De.typeNeedsHandpanNote(e))throw`Tried to create track note of type "${e}" with no HandpanNote, but this type needs one.`;this._note=t,this.type=e,this.position=r,this._id=this.position+"-"+this.baseName,this.refresh(),this.refreshHtmlElement()}static createGhost(t){return new De(null,Tt.ghost,t)}setPlaying(){this.htmlElement.firstElementChild?.classList.add("playing"),this._note&&this._note.setPlaying()}stopPlaying(){this.htmlElement.firstElementChild?.classList.remove("playing"),this._note&&this._note.stopPlaying()}syncWithTuneNote(t){this.refreshHtmlElement(),this._note=t,t.refreshHtmlElement()}refreshHtmlElement(){if(typeof document>"u")return;const t=document.querySelector(`[data-track-note="${this.id}"]`);t&&(this.htmlElement=t)}refresh(){this._id=this.position+"-"+this.baseName}static typeNeedsHandpanNote(t){return t===Tt.note}}class _t{static MIN_BPM=50;static MAX_BPM=200;static MIN_BEAT=2;static MAX_BEAT=8;_notes;_name;_bpm=120;_beat=4;get name(){return this._name}get notes(){return this._notes}get bpm(){return this._bpm}set bpm(t){t<=0&&(t=1),t>_t.MAX_BPM&&(t=_t.MAX_BPM),this._bpm=t}get beat(){return this._beat}set beat(t){t<_t.MIN_BEAT&&(t=_t.MIN_BEAT),t>_t.MAX_BEAT&&(t=_t.MAX_BEAT),this._beat=t}constructor(t){this._notes=[],this._name=t}addNoteAt(t){const e=De.createGhost(t);console.info("add note at ",t),console.info("note",e),console.info("notes before",this._notes),this._notes.forEach(r=>{r.position>=t&&(console.info("existing note at position "+t),r.position++)}),console.info("notes after",this._notes),console.info("Splicing:"),this._notes.splice(t===1?t-1:t,0,e)}addSlap(){this.addNote(null,Tt.slap)}addGhostNote(){this.addNote(null,Tt.slap)}addEmptyNote(){this.addNote(null,Tt.none)}addNote(t,e){const r=new De(t,e,this._notes.length);this._notes.forEach(a=>{a.position>=r.position&&(a.position++,a.refresh())}),this._notes.push(r)}addTuneNoteByPosition(t,e){const r=t.getTopNoteByPosition(e);if(!r){console.error(`Tried to find note at position ${e} of current Handpan tune, but did not found any. Skipping`);return}this.addNote(r,Tt.note)}addTuneNotesByPositions(t,e,r=1){for(let a=0;a<r;a++)e.forEach(n=>this.addTuneNoteByPosition(t,n))}addTuneDingByPosition(t,e){this.addNote(t.getDingByPosition(e),Tt.note)}removeNote(t){this._notes=this._notes.filter(e=>e.id!==t.id)}clone(){const t=new _t(this.name);return t.bpm=this.bpm,t.beat=this.beat,this._notes.forEach(e=>{t.addNote(e.note,e.type)}),t}syncWithTune(t){this._notes.forEach(e=>{if(!e.isNote)return;if(!e.note){console.error(`Track note ${e.baseName} is not linked to a HandpanNote. Skipping sync.`);return}const r=t.getSameNote(e.note);if(!r){console.warn(`Note ${e.baseName} is in the current track but was not found in the handpan tune.`);return}e.syncWithTuneNote(r)})}}const no=hs(oo());function ao(s){return s?[ro(),sn(s)]:[]}function oo(){return sn(ms())}function sn(s){const t=new _t("New York intro");return t.bpm=90,t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4],3),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,7,8]),t.addTuneNotesByPositions(s,[3,5,7,3,5,7,3,5],2),t.addTuneNotesByPositions(s,[1,3,5,1,3,5,1,3],2),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4]),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,7,8]),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4],2),t.addTuneNotesByPositions(s,[3,5,8,3,5,8,3,5],2),t.addTuneNotesByPositions(s,[1,3,5,1,3,5,1,3]),t.addTuneNotesByPositions(s,[1,3,5,1,3,8,7,6]),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4]),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,7,8]),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4],2),t.addTuneNotesByPositions(s,[2,4,6,2,4,6,2,4]),t.addTuneNoteByPosition(s,1),t.addEmptyNote(),t.addTuneNoteByPosition(s,2),t.addEmptyNote(),t.addTuneNoteByPosition(s,3),t.addEmptyNote(),t.addTuneNoteByPosition(s,4),t.addEmptyNote(),t.addTuneNoteByPosition(s,5),t.addEmptyNote(),t.addTuneNoteByPosition(s,6),t.addEmptyNote(),t.addTuneNoteByPosition(s,7),t.addEmptyNote(),t.addTuneNoteByPosition(s,8),t.addEmptyNote(),t.addTuneDingByPosition(s,1),t}function ro(){let s=1;const t=[],e=new _t("All notes");return e.bpm=180,ds.forEach(r=>{[X.C,X.D,X.E,X.F,X.G,X.A,X.B].forEach(n=>{[Z.flat,Z.none,Z.sharp].forEach(m=>{const p=new fs(n,m,r,J.topNote,s++);da.includes(p.fullName)||t.push([p,Tt.note])})})}),t.forEach(([r,a])=>{e.addNote(r,a)}),e}const Dt={...no,list:ao};var io=F('<option class="svelte-3wvbf9"> </option>'),lo=F('<option class="svelte-3wvbf9"> </option>'),co=F('<div class="track_inputs_container svelte-3wvbf9"><h3>Note</h3> <div class="track_select_container svelte-3wvbf9"><select class="svelte-3wvbf9"></select></div></div>'),fo=F('<div class="track-note-container svelte-3wvbf9"><div><div class="note-name svelte-3wvbf9"> </div> <div class="track-note-menu svelte-3wvbf9"><div><!> <!></div> <div class="track_inputs_container svelte-3wvbf9"><h3>Type</h3> <div class="track_select_container svelte-3wvbf9"><select class="svelte-3wvbf9"></select></div></div> <!></div></div></div>');function uo(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Dt,"$trackStore",e),n=()=>ee(Kt,"$tuneStore",e);let i=E(t,"trackNote",12);const m=Object.values(Tt);Dt.subscribe(b=>{b&&i()&&i().refreshHtmlElement()});function p(){i().refresh(),se.playNote(i())}function v(b){const S=a();S.removeNote(b),Dt.set(S.clone())}Fe(()=>i().refreshHtmlElement()),zs(()=>i().refreshHtmlElement()),Wt();var u=fo(),D=P(u),G=P(D),_=P(G,!0);y(G);var f=B(G,2),g=P(f),l=P(g);{var T=b=>{Ae(b,{onclick:()=>se.playNote(i()),children:(S,$)=>{Pe();var L=we("🔊");k(S,L)},$$slots:{default:!0}})};Q(l,b=>{d(i()),M(()=>!i().isNone)&&b(T)})}var x=B(l,2);Ae(x,{onclick:()=>v(i()),children:(b,S)=>{Pe();var $=we("🗑");k(b,$)},$$slots:{default:!0}}),y(g);var O=B(g,2),q=B(P(O),2),w=P(q);z(()=>{i(),le(()=>{})}),Ft(w,5,()=>m,b=>b,(b,S)=>{var $=io(),L=P($,!0);y($);var V={};z(()=>{ft(L,o(S)),V!==(V=o(S))&&($.value=($.__value=o(S))??"")}),k(b,$)}),y(w),y(q),y(O);var A=B(O,2);{var N=b=>{var S=co(),$=B(P(S),2),L=P($);z(()=>{i(),le(()=>{n()})}),Ft(L,5,()=>(n(),M(()=>n().notes)),V=>V.id,(V,H)=>{var I=lo(),R=P(I,!0);y(I);var ut={};z(()=>{ft(R,(o(H),M(()=>o(H).fullDetailedName))),ut!==(ut=o(H))&&(I.value=(I.__value=o(H))??"")}),k(V,I)}),y(L),y($),y(S),z(()=>nt(L,"size",(n(),M(()=>n().numberOfNotes)))),xe(L,()=>i().note,V=>i(i().note=V,!0)),tt("change",L,p),k(b,S)};Q(A,b=>{d(i()),n(),M(()=>i()&&n()&&i().isNote)&&b(N)})}y(f),y(D),y(u),z(()=>{nt(u,"data-track-note",(d(i()),M(()=>i().id))),Yt(D,1,`track-note type-${d(i()),M(()=>i().type)??""}`,"svelte-3wvbf9"),ft(_,(d(i()),M(()=>i().baseName))),nt(w,"size",M(()=>m.length))}),xe(w,()=>i().type,b=>i(i().type=b,!0)),k(s,u),Gt(),r()}var ho=F('<div class="track-note-container svelte-g8snzt"><div class="track-note svelte-g8snzt">&plus;</div></div>');function Rs(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Dt,"$trackStore",e);let n=E(t,"position",8);function i(){a().addNoteAt(n())}Wt();var m=ho(),p=P(m);y(m),tt("click",p,i),k(s,m),Gt(),r()}var po=F("<!> <!>",1),vo=F('<h2>Track</h2> <section class="svelte-1gat7zm"><div>Beat: <!></div> <div>Speed (bpm): <!></div> <!> <div class="notes svelte-1gat7zm"><!> <!></div></section>',1);function mo(s,t){Vt(t,!1);const[e,r]=ge(),a=()=>ee(Dt,"$trackStore",e),n=()=>ee(Kt,"$tuneStore",e);let i=dt(xs(Dt).bpm),m=dt(xs(Dt).beat),p=dt(!1);function v(){j(p,!0),se.playTrack(a(),()=>u())}function u(){j(p,!1),se.stop()}const D={stiffness:.15,damping:.8};ct(()=>(a(),o(i),o(m),n()),()=>{Is(Dt,M(a).bpm=o(i),M(a)),Is(Dt,M(a).beat=o(m),M(a)),a().syncWithTune(n())}),ps(),Wt();var G=vo(),_=B(It(G),2),f=P(_),g=B(P(f));Ls(g,{get min(){return d(_t),M(()=>_t.MIN_BEAT)},get max(){return d(_t),M(()=>_t.MAX_BEAT)},float:!0,pips:!0,all:"label",get springValues(){return D},get value(){return o(m)},set value(b){j(m,b)},$$events:{change:()=>u()},$$legacy:!0}),y(f);var l=B(f,2),T=B(P(l));Ls(T,{get min(){return d(_t),M(()=>_t.MIN_BPM)},get max(){return d(_t),M(()=>_t.MAX_BPM)},step:5,float:!0,pips:!0,pipstep:2,all:"label",get springValues(){return D},get value(){return o(i)},set value(b){j(i,b)},$$events:{change:()=>u()},$$legacy:!0}),y(l);var x=B(l,2);{var O=b=>{Ae(b,{onclick:u,children:(S,$)=>{Pe();var L=we("⏸");k(S,L)},$$slots:{default:!0}})},q=b=>{Ae(b,{onclick:v,children:(S,$)=>{Pe();var L=we("⏯");k(S,L)},$$slots:{default:!0}})};Q(x,b=>{o(p)?b(O):b(q,!1)})}var w=B(x,2),A=P(w);Rs(A,{position:1});var N=B(A,2);Ft(N,3,()=>(a(),M(()=>a().notes)),b=>b.id,(b,S,$)=>{var L=po(),V=It(L);uo(V,{get trackNote(){return o(S)}});var H=B(V,2);{let I=bt(()=>o($)+1);Rs(H,{get position(){return o(I)}})}k(b,L)}),y(w),y(_),k(s,G),Gt(),r()}var _o=F("<option> </option>"),go=F('<h2>Track list</h2> <select name="tracks_list" id="tracks_list" class="svelte-81oup7"></select>',1);function bo(s,t){Vt(t,!1);let e,r,a,n=dt([]);Kt.subscribe(u=>{e=u||e}),Dt.subscribe(u=>a=u||a);function i(u){const D=u.target;m(parseInt(String(D.value??""),10))}function m(u){if(!o(n)[u])throw"Invalid track index selected.";a=o(n)[u],r.setItem("current_track",u.toString());try{Dt.set(a),a.syncWithTune(e)}catch(D){console.error("Error setting current track:",D);return}}Fe(()=>{j(n,Dt.list(e)),r=window.localStorage;const u=parseInt(String(r.getItem("current_track")),10);isNaN(u)||m(u)}),Wt();var p=go(),v=B(It(p),2);Ft(v,7,()=>o(n),u=>u.name,(u,D,G)=>{var _=_o(),f=P(_,!0);y(_);var g={};z(()=>{ft(f,o(D).name),g!==(g=o(G))&&(_.value=(_.__value=o(G))??"")}),k(u,_)}),y(v),tt("change",v,i),k(s,p),Gt()}var yo=F('<div class="container svelte-17demy1"><aside id="left" class="svelte-17demy1"><section><!></section> <section><!></section></aside> <aside id="center" class="svelte-17demy1"><!></aside> <aside id="right" class="svelte-17demy1"><button>Clear storage</button></aside></div>');function ko(s,t){Vt(t,!1),Fe(()=>{se.loadAudioFiles(),Kt.init()});function e(){window.localStorage.clear(),console.log("Local storage cleared."),window.location.reload()}Wt();var r=yo(),a=P(r),n=P(a),i=P(n);bo(i,{}),y(n);var m=B(n,2),p=P(m);Ta(p,{}),y(m),y(a);var v=B(a,2),u=P(v);mo(u,{}),y(v);var D=B(v,2),G=P(D);y(D),y(r),tt("click",G,e),k(s,r),Gt()}export{ko as component};
