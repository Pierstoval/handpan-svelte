import{S as De,i as we,s as Ae,e as v,t as R,k as P,c as N,a as b,g as W,n as I,d as c,b as y,f as B,H as _,I as te,J as Se,K as Ee,L as _e,h as Le,M as Be,N as dt,A as qe,z as pt,O as ze,C as mt,l as je,j as ae,m as ie,o as re,P as Ve,x as Y,u as x,v as he,r as Ke,Q as Ze,w as Je,R as He,T as Fe,U as xe,V as gt}from"../chunks/vendor-fe108c8f.js";var vt;(function(t){t.left="left",t.right="right"})(vt||(vt={}));var L;(function(t){t.A="A",t.B="B",t.C="C",t.D="D",t.E="E",t.F="F",t.G="G"})(L||(L={}));const qt=["Cb2","C2","C#2","Db2","D2","D#2","Eb2","A#5","B1","Bb5","B5","B#5","C6"],et=[2,3,4,5],Kt={C:24,D:26,E:28,F:29,G:31,A:33,B:35};var q;(function(t){t.none="",t.sharp="#",t.flat="b"})(q||(q={}));var Q;(function(t){t.topNote="topNote",t.bottomNote="bottomNote",t.ding="ding"})(Q||(Q={}));var le;(function(t){t.note="note",t.slap="slap",t.ghost="ghost",t.none="none"})(le||(le={}));class be{constructor(e,n,s,l,r){if(this._isPlaying=!1,this._note=e,this._alteration=n,this._octave=s,this._type=l,this._position=r,r<=0)throw new Error("Note position must be a non-negative and non-zero integer.");this.refresh(),this.refreshHtmlElement()}get htmlElement(){return this._htmlElement}set htmlElement(e){if(!e){console.warn("Tried to set empty html element to handpan note.");return}this._htmlElement=e}get octave(){return this._octave}set octave(e){this._octave=e,this.refresh()}get alteration(){return this._alteration}set alteration(e){this._alteration=e,this.refresh()}get note(){return this._note}set note(e){this._note=e,this.refresh()}get type(){return this._type}get position(){return this._position}get fullName(){return this._note+this._alteration+this._octave}get isPlaying(){return this._isPlaying}get fullDetailedName(){return this._position+" - "+this.fullName+(this.isDing?" (ding)":"")+(this.isBottom?" (bottom)":"")}get isTop(){return this._type===Q.topNote}get isDing(){return this._type===Q.ding}get isBottom(){return this._type===Q.bottomNote}get midiNumber(){let e=Kt[this._note.toString()]+(this._octave-1)*12;return this._alteration===q.sharp?e++:this._alteration===q.flat&&e--,e}forcePosition(e){this._position=e}setPlaying(){if(!this._htmlElement){console.warn("Playing note is not attached to any HTML element. The issue might be that this not is not in your current handpan tune.");return}this._isPlaying=!0,this._htmlElement.classList.add("playing"),this._htmlElement.firstElementChild.classList.add("playing")}stopPlaying(){!this._htmlElement||(this._isPlaying=!1,this._htmlElement.classList.remove("playing"),this._htmlElement.firstElementChild.classList.remove("playing"))}refreshHtmlElement(){if(typeof document=="undefined")return;const e=document.querySelector(`[data-handpan-note="${this.fullName}"]`);e&&(this.htmlElement=e)}refresh(){const e={"B#":[L.C,q.none,1],"E#":[L.F,q.none,0],Ab:[L.G,q.sharp,0],Bb:[L.A,q.sharp,0],Cb:[L.B,q.none,-1],Db:[L.C,q.none,0],Eb:[L.D,q.sharp,0],Fb:[L.E,q.none,0],Gb:[L.F,q.sharp,0]},n=this._note+this._alteration,s=e[n];if(!s)return;let l;l&&(this._octave+l<Math.min(...et)||this._octave+l<Math.max(...et))||([this._note,this._alteration,l]=s,l&&(this._octave+=l))}}const Qe={clac:"clac/clac.flac",gu:"gu/D2.flac",notes:{E2:"shellopan/E2.flac",F2:"shellopan/F2.flac","F#2":"shellopan/Fs2.flac",G2:"shellopan/G2.flac","G#2":"shellopan/Gs2.flac",A2:"shellopan/A2.flac","A#2":"shellopan/As2.flac",B2:"shellopan/B2.flac",C3:"shellopan/C3.flac","C#3":"shellopan/Cs3.flac",D3:"shellopan/D3.flac","D#3":"shellopan/Ds3.flac",E3:"shellopan/E3.flac",F3:"shellopan/F3.flac","F#3":"shellopan/Fs3.flac",G3:"shellopan/G3.flac","G#3":"shellopan/Gs3.flac",A3:"shellopan/A3.flac","A#3":"shellopan/As3.flac",B3:"shellopan/B3.flac",C4:"shellopan/C4.flac","C#4":"shellopan/Cs4.flac",D4:"shellopan/D4.flac","D#4":"shellopan/Ds4.flac",E4:"shellopan/E4.flac",F4:"shellopan/F4.flac","F#4":"shellopan/Fs4.flac",G4:"shellopan/G4.flac","G#4":"shellopan/Gs4.flac",A4:"shellopan/A4.flac","A#4":"shellopan/As4.flac",B4:"shellopan/B4.flac",C5:"shellopan/C5.flac","C#5":"shellopan/Cs5.flac",D5:"shellopan/D5.flac","D#5":"shellopan/Ds5.flac",E5:"shellopan/E5.flac",F5:"shellopan/F5.flac","F#5":"shellopan/Fs5.flac",G5:"shellopan/G5.flac","G#5":"shellopan/Gs5.flac",A5:"shellopan/A5.flac"}},Nt=class{static get isPlaying(){return this._isPlaying}static loadAudioFiles(){this.loadAudioFile("clac",Qe.clac),this.loadAudioFile("gu",Qe.gu);for(const t in Qe.notes)this.loadAudioFile(t,Qe.notes[t])}static playTrack(t,e){this.stop(),this._isPlaying=!0;const n=this.getMsPerBeat(t.bpm,t.beat);let s=n;t.notes.forEach(l=>{this.addPlayingTimeout(()=>Nt.playNote(l),s),s+=n}),e&&this.addPlayingTimeout(e,s),this.addPlayingTimeout(()=>this.stop(),s)}static stop(){for(;this.playingTimeouts.length;)clearTimeout(this.playingTimeouts.shift());for(;this.playingNotes.length;)this.playingNotes.shift().stopPlaying();this.playingTimeouts=[],this.playingNotes=[],this._isPlaying=!1}static playNoteByType(t,e=1,n=null){if(!this.loadedAudio[t]){console.error(`Sound type "${t}" s not loaded or does not exist.`);return}const s=this.loadedAudio[t].cloneNode();if(s.volume=e,s.play(),n){const l=isNaN(s.duration)?this.DEFAULT_AUDIO_DURATION:s.duration;this.addPlayingTimeout(n,l)}}static playNote(t){switch(t.setPlaying(),this.playingNotes.push(t),!0){case t.isSlap:this.playNoteByType("clac",1,()=>this.stopNote(t));break;case t.isGhost:this.playNoteByType("clac",1,()=>this.stopNote(t));break;case t.isNone:break;default:this.playNoteByType(t.displayName,1,()=>this.stopNote(t));break}}static stopNote(t){t.stopPlaying(),this.playingNotes=this.playingNotes.filter(e=>e!==t)}static getMsPerBeat(t,e){return 1e3*60/t/e}static addPlayingTimeout(t,e){this.playingTimeouts.push(setTimeout(t,e))}static loadAudioFile(t,e){const n=new Audio;n.src=e,n.preload="auto",n.volume=1,n.addEventListener("canplaythrough",()=>this.loadedAudio[t]=n)}};let ye=Nt;ye.DEFAULT_AUDIO_DURATION=300;ye._isPlaying=!1;ye.loadedAudio={};ye.playingTimeouts=[];ye.playingNotes=[];function bt(t,e,n){const s=t.slice();return s[9]=e[n],s}function Et(t,e,n){const s=t.slice();return s[9]=e[n],s}function yt(t,e,n){const s=t.slice();return s[14]=e[n],s}function $t(t){let e,n=t[14]+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{class:!0});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[14],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(a,o){B(a,e,o),_(e,s),_(e,l)},p:te,d(a){a&&c(e)}}}function kt(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{class:!0});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(a,o){B(a,e,o),_(e,s),_(e,l)},p:te,d(a){a&&c(e)}}}function Tt(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{class:!0});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(a,o){B(a,e,o),_(e,s),_(e,l)},p:te,d(a){a&&c(e)}}}function Jt(t){let e,n,s,l=t[0].fullName+"",r,a,o,h,u,i,p,d,g,w,A,C,M,ce,H,j,z,T,K,F,J,O,G,D,ue,E,V,Z,ne,S,oe,pe=t[0].midiNumber+"",f,m,U,ke,Ge,me=t[1],ee=[];for(let k=0;k<me.length;k+=1)ee[k]=$t(yt(t,me,k));let ge=t[2],X=[];for(let k=0;k<ge.length;k+=1)X[k]=kt(Et(t,ge,k));let Ce=t[3],fe=[];for(let k=0;k<Ce.length;k+=1)fe[k]=Tt(bt(t,Ce,k));return{c(){e=v("div"),n=v("div"),s=v("div"),r=R(l),a=P(),o=v("div"),h=v("div"),u=v("h3"),i=R("Note"),p=P(),d=v("div"),g=v("select");for(let k=0;k<ee.length;k+=1)ee[k].c();w=P(),A=v("div"),C=v("h3"),M=R("Octave"),ce=P(),H=v("div"),j=v("select");for(let k=0;k<X.length;k+=1)X[k].c();z=P(),T=v("div"),K=v("h3"),F=R("Alteration"),J=P(),O=v("div"),G=v("select");for(let k=0;k<fe.length;k+=1)fe[k].c();D=P(),ue=v("div"),E=v("h4"),V=R("Info"),Z=P(),ne=v("ul"),S=v("li"),oe=R("Midi: "),f=R(pe),this.h()},l(k){e=N(k,"DIV",{class:!0,"data-handpan-note":!0});var se=b(e);n=N(se,"DIV",{class:!0});var $=b(n);s=N($,"DIV",{class:!0});var ve=b(s);r=W(ve,l),ve.forEach(c),a=I($),o=N($,"DIV",{class:!0});var Te=b(o);h=N(Te,"DIV",{class:!0});var Ue=b(h);u=N(Ue,"H3",{});var st=b(u);i=W(st,"Note"),st.forEach(c),p=I(Ue),d=N(Ue,"DIV",{class:!0});var lt=b(d);g=N(lt,"SELECT",{size:!0,class:!0});var ot=b(g);for(let Ne=0;Ne<ee.length;Ne+=1)ee[Ne].l(ot);ot.forEach(c),lt.forEach(c),Ue.forEach(c),w=I(Te),A=N(Te,"DIV",{class:!0});var Xe=b(A);C=N(Xe,"H3",{});var at=b(C);M=W(at,"Octave"),at.forEach(c),ce=I(Xe),H=N(Xe,"DIV",{class:!0});var it=b(H);j=N(it,"SELECT",{size:!0,class:!0});var rt=b(j);for(let Ne=0;Ne<X.length;Ne+=1)X[Ne].l(rt);rt.forEach(c),it.forEach(c),Xe.forEach(c),z=I(Te),T=N(Te,"DIV",{class:!0});var Re=b(T);K=N(Re,"H3",{});var ht=b(K);F=W(ht,"Alteration"),ht.forEach(c),J=I(Re),O=N(Re,"DIV",{class:!0});var ct=b(O);G=N(ct,"SELECT",{size:!0,class:!0});var ft=b(G);for(let Ne=0;Ne<fe.length;Ne+=1)fe[Ne].l(ft);ft.forEach(c),ct.forEach(c),Re.forEach(c),D=I(Te),ue=N(Te,"DIV",{});var We=b(ue);E=N(We,"H4",{});var ut=b(E);V=W(ut,"Info"),ut.forEach(c),Z=I(We),ne=N(We,"UL",{});var _t=b(ne);S=N(_t,"LI",{});var Ye=b(S);oe=W(Ye,"Midi: "),f=W(Ye,pe),Ye.forEach(c),_t.forEach(c),We.forEach(c),Te.forEach(c),$.forEach(c),se.forEach(c),this.h()},h(){y(s,"class","note-name svelte-1jj1888"),y(g,"size",t[1].length),y(g,"class","svelte-1jj1888"),t[0].note===void 0&&Se(()=>t[6].call(g)),y(d,"class","select_container svelte-1jj1888"),y(h,"class","inputs_container svelte-1jj1888"),y(j,"size",t[2].length),y(j,"class","svelte-1jj1888"),t[0].octave===void 0&&Se(()=>t[7].call(j)),y(H,"class","select_container svelte-1jj1888"),y(A,"class","inputs_container svelte-1jj1888"),y(G,"size",t[3].length),y(G,"class","svelte-1jj1888"),t[0].alteration===void 0&&Se(()=>t[8].call(G)),y(O,"class","select_container svelte-1jj1888"),y(T,"class","inputs_container svelte-1jj1888"),y(o,"class","note-menu  svelte-1jj1888"),y(n,"class",m="note "+(t[0].isPlaying?"playing":"")+" svelte-1jj1888"),y(e,"class","note-container svelte-1jj1888"),y(e,"data-handpan-note",U=t[0].fullName)},m(k,se){B(k,e,se),_(e,n),_(n,s),_(s,r),_(n,a),_(n,o),_(o,h),_(h,u),_(u,i),_(h,p),_(h,d),_(d,g);for(let $=0;$<ee.length;$+=1)ee[$].m(g,null);Ee(g,t[0].note),_(o,w),_(o,A),_(A,C),_(C,M),_(A,ce),_(A,H),_(H,j);for(let $=0;$<X.length;$+=1)X[$].m(j,null);Ee(j,t[0].octave),_(o,z),_(o,T),_(T,K),_(K,F),_(T,J),_(T,O),_(O,G);for(let $=0;$<fe.length;$+=1)fe[$].m(G,null);Ee(G,t[0].alteration),_(o,D),_(o,ue),_(ue,E),_(E,V),_(ue,Z),_(ue,ne),_(ne,S),_(S,oe),_(S,f),ke||(Ge=[_e(g,"change",t[6]),_e(g,"change",t[4]),_e(j,"change",t[7]),_e(j,"change",t[4]),_e(G,"change",t[8]),_e(G,"change",t[4])],ke=!0)},p(k,[se]){if(se&1&&l!==(l=k[0].fullName+"")&&Le(r,l),se&2){me=k[1];let $;for($=0;$<me.length;$+=1){const ve=yt(k,me,$);ee[$]?ee[$].p(ve,se):(ee[$]=$t(ve),ee[$].c(),ee[$].m(g,null))}for(;$<ee.length;$+=1)ee[$].d(1);ee.length=me.length}if(se&3&&Ee(g,k[0].note),se&4){ge=k[2];let $;for($=0;$<ge.length;$+=1){const ve=Et(k,ge,$);X[$]?X[$].p(ve,se):(X[$]=kt(ve),X[$].c(),X[$].m(j,null))}for(;$<X.length;$+=1)X[$].d(1);X.length=ge.length}if(se&3&&Ee(j,k[0].octave),se&8){Ce=k[3];let $;for($=0;$<Ce.length;$+=1){const ve=bt(k,Ce,$);fe[$]?fe[$].p(ve,se):(fe[$]=Tt(ve),fe[$].c(),fe[$].m(G,null))}for(;$<fe.length;$+=1)fe[$].d(1);fe.length=Ce.length}se&3&&Ee(G,k[0].alteration),se&1&&pe!==(pe=k[0].midiNumber+"")&&Le(f,pe),se&3&&m!==(m="note "+(k[0].isPlaying?"playing":"")+" svelte-1jj1888")&&y(n,"class",m),se&3&&U!==(U=k[0].fullName)&&y(e,"data-handpan-note",U)},i:te,o:te,d(k){k&&c(e),Be(ee,k),Be(X,k),Be(fe,k),ke=!1,dt(Ge)}}}function Qt(t,e,n){let{note:s}=e,{onChange:l}=e;const r=Object.values(L),a=[1,2,3,4,5],o=Object.values(q);function h(){l&&l(s),ye.playNoteByType(s.fullName)}qe(()=>s.refreshHtmlElement()),pt(()=>s.refreshHtmlElement());function u(){s.note=ze(this),n(0,s),n(1,r)}function i(){s.octave=ze(this),n(0,s),n(1,r)}function p(){s.alteration=ze(this),n(0,s),n(1,r)}return t.$$set=d=>{"note"in d&&n(0,s=d.note),"onChange"in d&&n(5,l=d.onChange)},[s,r,a,o,h,l,u,i,p]}class tt extends De{constructor(e){super();we(this,e,Qt,Jt,Ae,{note:0,onChange:5})}}class Yt{constructor(e){this._topNotes=[],this._dings=[],this._bottomNotes=[],e.forEach(n=>this.addNote(n)),this.refresh()}get dings(){return this._dings}get topNotes(){return this._topNotes}get bottomNotes(){return this._bottomNotes}get numberOfNotes(){return this._topNotes.length+this._dings.length+this._bottomNotes.length}get notes(){return this._notes||[]}addNote(e){e.isTop?(this._topNotes.push(e),e.forcePosition(this._topNotes.length)):e.isDing?(this._dings.push(e),e.forcePosition(this._dings.length)):e.isBottom&&(this._bottomNotes.push(e),e.forcePosition(this._topNotes.length))}addNoteAt(e,n){console.info("OK");const s=new be(L.A,q.none,3,n,e);let l=[];switch(n){case Q.topNote:l=this.topNotes;break;case Q.bottomNote:l=this.bottomNotes;break;case Q.ding:l=this.dings;break;default:throw new Error("Expected note to be either top, ding or bottom, and found an unsupported value.")}l.splice(e===1?e-1:e,0,s)}getTopNoteByPosition(e){for(const n of this._topNotes)if(n.position===e)return n;return null}getBottomNoteByPosition(e){for(const n of this._bottomNotes)if(n.position===e)return n;return null}getDingByPosition(e){for(const n of this._dings)if(n.position===e)return n;return null}getSameNote(e){switch(!0){case e.isTop:return this.getTopNoteByPosition(e.position);case e.isDing:return this.getDingByPosition(e.position);case e.isBottom:return this.getBottomNoteByPosition(e.position);default:throw new Error("Expected note to be either top, ding or bottom, and found an unsupported value.")}}refresh(){const e=(n,s)=>{const l=n.position,r=s.position;switch(!0){case l<r:return-1;case l===r:throw new Error("Two notes cannot have the same position!");case l>r:return 1}};this._topNotes.sort(e),this._dings.sort(e),this._bottomNotes.sort(e)}}const{subscribe:Zt,set:Dt,update:wn}=mt(wt());function wt(){return en()}function xt(){Dt(wt())}function en(){return new Yt([new be(L.C,q.sharp,3,Q.bottomNote,1),new be(L.G,q.none,3,Q.ding,1),new be(L.A,q.none,3,Q.topNote,1),new be(L.B,q.none,3,Q.topNote,2),new be(L.C,q.sharp,4,Q.topNote,3),new be(L.D,q.sharp,4,Q.topNote,4),new be(L.E,q.none,4,Q.topNote,5),new be(L.F,q.sharp,4,Q.topNote,6),new be(L.G,q.sharp,4,Q.topNote,7)])}const Me={setDefault:xt,subscribe:Zt,set:Dt};function tn(t){let e,n,s,l,r;return{c(){e=v("div"),n=v("div"),s=R("+"),this.h()},l(a){e=N(a,"DIV",{class:!0});var o=b(e);n=N(o,"DIV",{class:!0});var h=b(n);s=W(h,"+"),h.forEach(c),o.forEach(c),this.h()},h(){y(n,"class","handpan-note svelte-117otwt"),y(e,"class","handpan-note-container svelte-117otwt")},m(a,o){B(a,e,o),_(e,n),_(n,s),l||(r=_e(n,"click",t[0]),l=!0)},p:te,i:te,o:te,d(a){a&&c(e),l=!1,r()}}}function nn(t,e,n){let{position:s}=e,{type:l}=e,{tune:r}=e;Me.subscribe(o=>n(1,r=o||r));function a(){r.addNoteAt(s,l),Me.set(r)}return t.$$set=o=>{"position"in o&&n(2,s=o.position),"type"in o&&n(3,l=o.type),"tune"in o&&n(1,r=o.tune)},[a,r,s,l]}class Oe extends De{constructor(e){super();we(this,e,nn,tn,Ae,{position:2,type:3,tune:1})}}function At(t,e,n){const s=t.slice();return s[4]=e[n],s[5]=e,s[6]=n,s}function Bt(t,e,n){const s=t.slice();return s[4]=e[n],s[7]=e,s[6]=n,s}function Pt(t,e,n){const s=t.slice();return s[4]=e[n],s[8]=e,s[6]=n,s}function It(t,e){let n,s,l,r,a,o;function h(i){e[1](i,e[4],e[8],e[6])}let u={onChange:nt};return e[4]!==void 0&&(u.note=e[4]),s=new tt({props:u}),He.push(()=>Fe(s,"note",h)),a=new Oe({props:{position:e[6]+1,type:Q.topNote}}),{key:t,first:null,c(){n=je(),ae(s.$$.fragment),r=P(),ae(a.$$.fragment),this.h()},l(i){n=je(),ie(s.$$.fragment,i),r=I(i),ie(a.$$.fragment,i),this.h()},h(){this.first=n},m(i,p){B(i,n,p),re(s,i,p),B(i,r,p),re(a,i,p),o=!0},p(i,p){e=i;const d={};!l&&p&1&&(l=!0,d.note=e[4],Ve(()=>l=!1)),s.$set(d);const g={};p&1&&(g.position=e[6]+1),a.$set(g)},i(i){o||(Y(s.$$.fragment,i),Y(a.$$.fragment,i),o=!0)},o(i){x(s.$$.fragment,i),x(a.$$.fragment,i),o=!1},d(i){i&&c(n),he(s,i),i&&c(r),he(a,i)}}}function Ct(t,e){let n,s,l,r,a,o;function h(i){e[2](i,e[4],e[7],e[6])}let u={onChange:nt};return e[4]!==void 0&&(u.note=e[4]),s=new tt({props:u}),He.push(()=>Fe(s,"note",h)),a=new Oe({props:{position:e[6]+1,type:Q.ding}}),{key:t,first:null,c(){n=je(),ae(s.$$.fragment),r=P(),ae(a.$$.fragment),this.h()},l(i){n=je(),ie(s.$$.fragment,i),r=I(i),ie(a.$$.fragment,i),this.h()},h(){this.first=n},m(i,p){B(i,n,p),re(s,i,p),B(i,r,p),re(a,i,p),o=!0},p(i,p){e=i;const d={};!l&&p&1&&(l=!0,d.note=e[4],Ve(()=>l=!1)),s.$set(d);const g={};p&1&&(g.position=e[6]+1),a.$set(g)},i(i){o||(Y(s.$$.fragment,i),Y(a.$$.fragment,i),o=!0)},o(i){x(s.$$.fragment,i),x(a.$$.fragment,i),o=!1},d(i){i&&c(n),he(s,i),i&&c(r),he(a,i)}}}function jt(t,e){let n,s,l,r,a,o;function h(i){e[3](i,e[4],e[5],e[6])}let u={onChange:nt};return e[4]!==void 0&&(u.note=e[4]),s=new tt({props:u}),He.push(()=>Fe(s,"note",h)),a=new Oe({props:{position:e[6]+1,type:Q.bottomNote}}),{key:t,first:null,c(){n=je(),ae(s.$$.fragment),r=P(),ae(a.$$.fragment),this.h()},l(i){n=je(),ie(s.$$.fragment,i),r=I(i),ie(a.$$.fragment,i),this.h()},h(){this.first=n},m(i,p){B(i,n,p),re(s,i,p),B(i,r,p),re(a,i,p),o=!0},p(i,p){e=i;const d={};!l&&p&1&&(l=!0,d.note=e[4],Ve(()=>l=!1)),s.$set(d);const g={};p&1&&(g.position=e[6]+1),a.$set(g)},i(i){o||(Y(s.$$.fragment,i),Y(a.$$.fragment,i),o=!0)},o(i){x(s.$$.fragment,i),x(a.$$.fragment,i),o=!1},d(i){i&&c(n),he(s,i),i&&c(r),he(a,i)}}}function sn(t){let e,n,s,l,r,a,o,h,u,i=[],p=new Map,d,g,w,A,C,M,ce,H=[],j=new Map,z,T,K,F,J,O,G,D=[],ue=new Map,E;h=new Oe({props:{position:1,type:Q.topNote}});let V=t[0].topNotes;const Z=f=>f[4];for(let f=0;f<V.length;f+=1){let m=Pt(t,V,f),U=Z(m);p.set(U,i[f]=It(U,m))}M=new Oe({props:{position:1,type:Q.ding}});let ne=t[0].dings;const S=f=>f[4];for(let f=0;f<ne.length;f+=1){let m=Bt(t,ne,f),U=S(m);j.set(U,H[f]=Ct(U,m))}O=new Oe({props:{position:1,type:Q.bottomNote}});let oe=t[0].bottomNotes;const pe=f=>f[4];for(let f=0;f<oe.length;f+=1){let m=At(t,oe,f),U=pe(m);ue.set(U,D[f]=jt(U,m))}return{c(){e=v("h2"),n=R("Tune"),s=P(),l=v("h3"),r=R("Top notes:"),a=P(),o=v("div"),ae(h.$$.fragment),u=P();for(let f=0;f<i.length;f+=1)i[f].c();d=P(),g=v("h3"),w=R("Dings:"),A=P(),C=v("div"),ae(M.$$.fragment),ce=P();for(let f=0;f<H.length;f+=1)H[f].c();z=P(),T=v("h3"),K=R("Bottom notes:"),F=P(),J=v("div"),ae(O.$$.fragment),G=P();for(let f=0;f<D.length;f+=1)D[f].c();this.h()},l(f){e=N(f,"H2",{});var m=b(e);n=W(m,"Tune"),m.forEach(c),s=I(f),l=N(f,"H3",{});var U=b(l);r=W(U,"Top notes:"),U.forEach(c),a=I(f),o=N(f,"DIV",{class:!0});var ke=b(o);ie(h.$$.fragment,ke),u=I(ke);for(let X=0;X<i.length;X+=1)i[X].l(ke);ke.forEach(c),d=I(f),g=N(f,"H3",{});var Ge=b(g);w=W(Ge,"Dings:"),Ge.forEach(c),A=I(f),C=N(f,"DIV",{class:!0});var me=b(C);ie(M.$$.fragment,me),ce=I(me);for(let X=0;X<H.length;X+=1)H[X].l(me);me.forEach(c),z=I(f),T=N(f,"H3",{});var ee=b(T);K=W(ee,"Bottom notes:"),ee.forEach(c),F=I(f),J=N(f,"DIV",{class:!0});var ge=b(J);ie(O.$$.fragment,ge),G=I(ge);for(let X=0;X<D.length;X+=1)D[X].l(ge);ge.forEach(c),this.h()},h(){y(o,"class","notes-list"),y(C,"class","notes-list"),y(J,"class","notes-list")},m(f,m){B(f,e,m),_(e,n),B(f,s,m),B(f,l,m),_(l,r),B(f,a,m),B(f,o,m),re(h,o,null),_(o,u);for(let U=0;U<i.length;U+=1)i[U].m(o,null);B(f,d,m),B(f,g,m),_(g,w),B(f,A,m),B(f,C,m),re(M,C,null),_(C,ce);for(let U=0;U<H.length;U+=1)H[U].m(C,null);B(f,z,m),B(f,T,m),_(T,K),B(f,F,m),B(f,J,m),re(O,J,null),_(J,G);for(let U=0;U<D.length;U+=1)D[U].m(J,null);E=!0},p(f,[m]){m&1&&(V=f[0].topNotes,Ke(),i=Ze(i,m,Z,1,f,V,p,o,xe,It,null,Pt),Je()),m&1&&(ne=f[0].dings,Ke(),H=Ze(H,m,S,1,f,ne,j,C,xe,Ct,null,Bt),Je()),m&1&&(oe=f[0].bottomNotes,Ke(),D=Ze(D,m,pe,1,f,oe,ue,J,xe,jt,null,At),Je())},i(f){if(!E){Y(h.$$.fragment,f);for(let m=0;m<V.length;m+=1)Y(i[m]);Y(M.$$.fragment,f);for(let m=0;m<ne.length;m+=1)Y(H[m]);Y(O.$$.fragment,f);for(let m=0;m<oe.length;m+=1)Y(D[m]);E=!0}},o(f){x(h.$$.fragment,f);for(let m=0;m<i.length;m+=1)x(i[m]);x(M.$$.fragment,f);for(let m=0;m<H.length;m+=1)x(H[m]);x(O.$$.fragment,f);for(let m=0;m<D.length;m+=1)x(D[m]);E=!1},d(f){f&&c(e),f&&c(s),f&&c(l),f&&c(a),f&&c(o),he(h);for(let m=0;m<i.length;m+=1)i[m].d();f&&c(d),f&&c(g),f&&c(A),f&&c(C),he(M);for(let m=0;m<H.length;m+=1)H[m].d();f&&c(z),f&&c(T),f&&c(F),f&&c(J),he(O);for(let m=0;m<D.length;m+=1)D[m].d()}}}function nt(t){console.info("change note",t)}function ln(t,e,n){let s;Me.subscribe(o=>n(0,s=o||s));function l(o,h,u,i){u[i]=o,n(0,s)}function r(o,h,u,i){u[i]=o,n(0,s)}function a(o,h,u,i){u[i]=o,n(0,s)}return[s,l,r,a]}class on extends De{constructor(e){super();we(this,e,ln,sn,Ae,{})}}class de{get htmlElement(){return this._htmlElement}set htmlElement(e){if(!e){console.error("Tried to set empty html element to track note.");return}this._htmlElement=e}get fullName(){var e,n;switch(!0){case this.isSlap:return"\xD7";case this.isGhost:return"\u{1F47B}";case this.isNone:return"\u2014";default:return(n=(e=this.note)==null?void 0:e.fullName)!=null?n:"-"}}get displayName(){if(!this.isNote)throw new Error(`Note name for the music player can only be retrieved on notes. Current note is "${this.type}".`);return this.note.fullName}get isNote(){return this.type===le.note}get isSlap(){return this.type===le.slap}get isGhost(){return this.type===le.ghost}get isNone(){return this.type===le.none}constructor(e,n){if(!e&&de.typeNeedsHandpanNote(n))throw`Tried to create track note of type "${n}" with no HandpanNote, but this type needs one.`;this.note=e,this.type=n,this.refreshHtmlElement()}static createGhost(){return new de(null,le.ghost)}setPlaying(){if(!this._htmlElement){console.error(`Cannot highlight note ${this.fullName} because it does not have an HTML Element associated to it.`);return}this._htmlElement.firstElementChild.classList.add("playing"),this.note&&this.note.setPlaying()}stopPlaying(){if(!this._htmlElement){console.error(`Cannot disable highlight for note ${this.fullName} because it does not have an HTML Element associated to it.`);return}this._htmlElement.firstElementChild.classList.remove("playing"),this.note&&this.note.stopPlaying()}syncWithTuneNote(e){this.refreshHtmlElement(),this.note=e,e.refreshHtmlElement()}refreshHtmlElement(){if(typeof document=="undefined")return;const e=document.querySelector(`[data-track-note="${this.fullName}"]`);e&&(this.htmlElement=e)}static typeNeedsHandpanNote(e){return e===le.note}}const Pe=class{constructor(t){this._bpm=120,this._beat=4,this._notes=[],this._name=t}get name(){return this._name}get notes(){return this._notes}get bpm(){return this._bpm}set bpm(t){t<=0&&(t=1),t>Pe.MAX_BPM&&(t=Pe.MAX_BPM),this._bpm=t}get beat(){return this._beat}set beat(t){t<Pe.MIN_BEAT&&(t=Pe.MIN_BEAT),t>Pe.MAX_BEAT&&(t=Pe.MAX_BEAT),this._beat=t}addNoteAt(t){const e=de.createGhost();this._notes.splice(t===1?t-1:t,0,e)}addNote(t){this._notes.push(t)}syncWithTune(t){this._notes.forEach(e=>{if(!e.isNote)return;const n=t.getSameNote(e.note);if(!n){console.warn(`Note ${e.fullName} is in the current track but was not found in the handpan tune.`);return}e.syncWithTuneNote(n)})}};let $e=Pe;$e.MIN_BPM=50;$e.MAX_BPM=200;$e.MIN_BEAT=2;$e.MAX_BEAT=8;const{subscribe:an,set:Vt,update:An}=mt(Ht());function rn(t){return t?[Ft(),cn(t)]:[]}function hn(){Vt(Ht())}function Ht(){return Ft()}function cn(t){const e=new $e("Demo");return e.addNote(new de(t.getDingByPosition(1),le.note)),e.addNote(new de(t.getTopNoteByPosition(2),le.note)),e.addNote(new de(null,le.slap)),e.addNote(new de(t.getTopNoteByPosition(4),le.note)),e.addNote(new de(t.getDingByPosition(1),le.note)),e.addNote(new de(t.getTopNoteByPosition(3),le.note)),e.addNote(new de(null,le.slap)),e.addNote(new de(t.getTopNoteByPosition(5),le.note)),e}function Ft(){let t=1;const e={},n=new $e("All notes");n.bpm=180,et.forEach(s=>{[L.C,L.D,L.E,L.F,L.G,L.A,L.B].forEach(r=>{[q.flat,q.none,q.sharp].forEach(o=>{const h=new be(r,o,s,Q.topNote,t++);if(qt.includes(h.fullName))return;const u=new de(h,le.note);e[u.fullName]=u})})});for(const s in e){const l=e[s];n.addNote(l)}return n}const Ie={list:rn,setDefault:hn,subscribe:an,set:Vt};function Mt(t,e,n){const s=t.slice();return s[6]=e[n],s}function Ot(t,e,n){const s=t.slice();return s[9]=e[n],s}function Gt(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{class:!0});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-16amr53")},m(a,o){B(a,e,o),_(e,s),_(e,l)},p:te,d(a){a&&c(e)}}}function St(t){let e,n,s,l,r,a,o,h,u,i=t[1].notes,p=[];for(let d=0;d<i.length;d+=1)p[d]=Lt(Mt(t,i,d));return{c(){e=v("div"),n=v("h3"),s=R("Note"),l=P(),r=v("div"),a=v("select");for(let d=0;d<p.length;d+=1)p[d].c();this.h()},l(d){e=N(d,"DIV",{class:!0});var g=b(e);n=N(g,"H3",{});var w=b(n);s=W(w,"Note"),w.forEach(c),l=I(g),r=N(g,"DIV",{class:!0});var A=b(r);a=N(A,"SELECT",{size:!0,class:!0});var C=b(a);for(let M=0;M<p.length;M+=1)p[M].l(C);C.forEach(c),A.forEach(c),g.forEach(c),this.h()},h(){y(a,"size",o=t[1].numberOfNotes),y(a,"class","svelte-16amr53"),t[0].note===void 0&&Se(()=>t[5].call(a)),y(r,"class","track_select_container svelte-16amr53"),y(e,"class","track_inputs_container svelte-16amr53")},m(d,g){B(d,e,g),_(e,n),_(n,s),_(e,l),_(e,r),_(r,a);for(let w=0;w<p.length;w+=1)p[w].m(a,null);Ee(a,t[0].note),h||(u=[_e(a,"change",t[5]),_e(a,"change",t[3])],h=!0)},p(d,g){if(g&2){i=d[1].notes;let w;for(w=0;w<i.length;w+=1){const A=Mt(d,i,w);p[w]?p[w].p(A,g):(p[w]=Lt(A),p[w].c(),p[w].m(a,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=i.length}g&2&&o!==(o=d[1].numberOfNotes)&&y(a,"size",o),g&5&&Ee(a,d[0].note)},d(d){d&&c(e),Be(p,d),h=!1,dt(u)}}}function Lt(t){let e,n=t[6].fullDetailedName+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{class:!0});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[6],e.value=e.__value,y(e,"class","svelte-16amr53")},m(a,o){B(a,e,o),_(e,s),_(e,l)},p(a,o){o&2&&n!==(n=a[6].fullDetailedName+"")&&Le(s,n),o&2&&r!==(r=a[6])&&(e.__value=r,e.value=e.__value)},d(a){a&&c(e)}}}function fn(t){let e,n,s,l=t[0].fullName+"",r,a,o,h,u,i,p,d,g,w,A,C,M,ce,H=t[2],j=[];for(let T=0;T<H.length;T+=1)j[T]=Gt(Ot(t,H,T));let z=t[0]&&t[1]&&t[0].isNote&&St(t);return{c(){e=v("div"),n=v("div"),s=v("div"),r=R(l),a=P(),o=v("div"),h=v("div"),u=v("h3"),i=R("Type"),p=P(),d=v("div"),g=v("select");for(let T=0;T<j.length;T+=1)j[T].c();w=P(),z&&z.c(),this.h()},l(T){e=N(T,"DIV",{class:!0,"data-track-note":!0});var K=b(e);n=N(K,"DIV",{class:!0});var F=b(n);s=N(F,"DIV",{class:!0});var J=b(s);r=W(J,l),J.forEach(c),a=I(F),o=N(F,"DIV",{class:!0});var O=b(o);h=N(O,"DIV",{class:!0});var G=b(h);u=N(G,"H3",{});var D=b(u);i=W(D,"Type"),D.forEach(c),p=I(G),d=N(G,"DIV",{class:!0});var ue=b(d);g=N(ue,"SELECT",{size:!0,class:!0});var E=b(g);for(let V=0;V<j.length;V+=1)j[V].l(E);E.forEach(c),ue.forEach(c),G.forEach(c),w=I(O),z&&z.l(O),O.forEach(c),F.forEach(c),K.forEach(c),this.h()},h(){y(s,"class","note-name svelte-16amr53"),y(g,"size",t[2].length),y(g,"class","svelte-16amr53"),t[0].type===void 0&&Se(()=>t[4].call(g)),y(d,"class","track_select_container svelte-16amr53"),y(h,"class","track_inputs_container svelte-16amr53"),y(o,"class","track-note-menu svelte-16amr53"),y(n,"class",A="track-note type-"+t[0].type+" svelte-16amr53"),y(e,"class","track-note-container svelte-16amr53"),y(e,"data-track-note",C=t[0].fullName)},m(T,K){B(T,e,K),_(e,n),_(n,s),_(s,r),_(n,a),_(n,o),_(o,h),_(h,u),_(u,i),_(h,p),_(h,d),_(d,g);for(let F=0;F<j.length;F+=1)j[F].m(g,null);Ee(g,t[0].type),_(o,w),z&&z.m(o,null),M||(ce=_e(g,"change",t[4]),M=!0)},p(T,[K]){if(K&1&&l!==(l=T[0].fullName+"")&&Le(r,l),K&4){H=T[2];let F;for(F=0;F<H.length;F+=1){const J=Ot(T,H,F);j[F]?j[F].p(J,K):(j[F]=Gt(J),j[F].c(),j[F].m(g,null))}for(;F<j.length;F+=1)j[F].d(1);j.length=H.length}K&5&&Ee(g,T[0].type),T[0]&&T[1]&&T[0].isNote?z?z.p(T,K):(z=St(T),z.c(),z.m(o,null)):z&&(z.d(1),z=null),K&5&&A!==(A="track-note type-"+T[0].type+" svelte-16amr53")&&y(n,"class",A),K&5&&C!==(C=T[0].fullName)&&y(e,"data-track-note",C)},i:te,o:te,d(T){T&&c(e),Be(j,T),z&&z.d(),M=!1,ce()}}}function un(t,e,n){let{trackNote:s}=e,l;const r=Object.values(le);Ie.subscribe(u=>{u&&s.refreshHtmlElement()}),Me.subscribe(u=>{n(1,l=u)});function a(){ye.playNote(s)}qe(()=>s.refreshHtmlElement()),pt(()=>s.refreshHtmlElement());function o(){s.type=ze(this),n(0,s),n(2,r)}function h(){s.note=ze(this),n(0,s),n(2,r)}return t.$$set=u=>{"trackNote"in u&&n(0,s=u.trackNote)},[s,l,r,a,o,h]}class _n extends De{constructor(e){super();we(this,e,un,fn,Ae,{trackNote:0})}}function dn(t){let e,n,s,l,r;return{c(){e=v("div"),n=v("div"),s=R("+"),this.h()},l(a){e=N(a,"DIV",{class:!0});var o=b(e);n=N(o,"DIV",{class:!0});var h=b(n);s=W(h,"+"),h.forEach(c),o.forEach(c),this.h()},h(){y(n,"class","track-note svelte-g8snzt"),y(e,"class","track-note-container svelte-g8snzt")},m(a,o){B(a,e,o),_(e,n),_(n,s),l||(r=_e(n,"click",t[0]),l=!0)},p:te,i:te,o:te,d(a){a&&c(e),l=!1,r()}}}function pn(t,e,n){let{position:s}=e,l;Ie.subscribe(a=>l=a||l);function r(){l.addNoteAt(s),Ie.set(l)}return t.$$set=a=>{"position"in a&&n(1,s=a.position)},[r,s]}class zt extends De{constructor(e){super();we(this,e,pn,dn,Ae,{position:1})}}function Ut(t,e,n){const s=t.slice();return s[12]=e[n],s[13]=e,s[14]=n,s}function mn(t){let e,n,s,l;return{c(){e=v("button"),n=R("\u23EF"),this.h()},l(r){e=N(r,"BUTTON",{type:!0,class:!0});var a=b(e);n=W(a,"\u23EF"),a.forEach(c),this.h()},h(){y(e,"type","button"),y(e,"class","track-control svelte-zgc0o4")},m(r,a){B(r,e,a),_(e,n),s||(l=_e(e,"click",t[4]),s=!0)},p:te,d(r){r&&c(e),s=!1,l()}}}function gn(t){let e,n,s,l;return{c(){e=v("button"),n=R("\u23F8"),this.h()},l(r){e=N(r,"BUTTON",{type:!0,class:!0});var a=b(e);n=W(a,"\u23F8"),a.forEach(c),this.h()},h(){y(e,"type","button"),y(e,"class","track-control svelte-zgc0o4")},m(r,a){B(r,e,a),_(e,n),s||(l=_e(e,"click",t[5]),s=!0)},p:te,d(r){r&&c(e),s=!1,l()}}}function Xt(t){let e,n,s,l,r;function a(h){t[9](h,t[12],t[13],t[14])}let o={};return t[12]!==void 0&&(o.trackNote=t[12]),e=new _n({props:o}),He.push(()=>Fe(e,"trackNote",a)),l=new zt({props:{position:t[14]+1}}),{c(){ae(e.$$.fragment),s=P(),ae(l.$$.fragment)},l(h){ie(e.$$.fragment,h),s=I(h),ie(l.$$.fragment,h)},m(h,u){re(e,h,u),B(h,s,u),re(l,h,u),r=!0},p(h,u){t=h;const i={};!n&&u&4&&(n=!0,i.trackNote=t[12],Ve(()=>n=!1)),e.$set(i)},i(h){r||(Y(e.$$.fragment,h),Y(l.$$.fragment,h),r=!0)},o(h){x(e.$$.fragment,h),x(l.$$.fragment,h),r=!1},d(h){he(e,h),h&&c(s),he(l,h)}}}function vn(t){let e,n,s,l,r,a,o,h,u,i,p,d,g,w,A,C,M,ce,H;function j(E){t[7](E)}let z={min:$e.MIN_BEAT,max:$e.MAX_BEAT,float:!0,pips:!0,all:"label",springValues:t[6]};t[1]!==void 0&&(z.values=t[1]),o=new gt({props:z}),He.push(()=>Fe(o,"values",j));function T(E){t[8](E)}let K={min:$e.MIN_BPM,max:$e.MAX_BPM,step:5,float:!0,pips:!0,pipstep:2,all:"label",springValues:t[6]};t[0]!==void 0&&(K.values=t[0]),d=new gt({props:K}),He.push(()=>Fe(d,"values",T));function F(E,V){return E[3]?gn:mn}let J=F(t),O=J(t);M=new zt({props:{position:1}});let G=t[2].notes,D=[];for(let E=0;E<G.length;E+=1)D[E]=Xt(Ut(t,G,E));const ue=E=>x(D[E],1,1,()=>{D[E]=null});return{c(){e=v("h2"),n=R("Track"),s=P(),l=v("section"),r=v("div"),a=R(`Beat:
		`),ae(o.$$.fragment),u=P(),i=v("div"),p=R(`Speed (bpm):
		`),ae(d.$$.fragment),w=P(),O.c(),A=P(),C=v("div"),ae(M.$$.fragment),ce=P();for(let E=0;E<D.length;E+=1)D[E].c();this.h()},l(E){e=N(E,"H2",{});var V=b(e);n=W(V,"Track"),V.forEach(c),s=I(E),l=N(E,"SECTION",{class:!0});var Z=b(l);r=N(Z,"DIV",{});var ne=b(r);a=W(ne,`Beat:
		`),ie(o.$$.fragment,ne),ne.forEach(c),u=I(Z),i=N(Z,"DIV",{});var S=b(i);p=W(S,`Speed (bpm):
		`),ie(d.$$.fragment,S),S.forEach(c),w=I(Z),O.l(Z),A=I(Z),C=N(Z,"DIV",{class:!0});var oe=b(C);ie(M.$$.fragment,oe),ce=I(oe);for(let pe=0;pe<D.length;pe+=1)D[pe].l(oe);oe.forEach(c),Z.forEach(c),this.h()},h(){y(C,"class","notes svelte-zgc0o4"),y(l,"class","svelte-zgc0o4")},m(E,V){B(E,e,V),_(e,n),B(E,s,V),B(E,l,V),_(l,r),_(r,a),re(o,r,null),_(l,u),_(l,i),_(i,p),re(d,i,null),_(l,w),O.m(l,null),_(l,A),_(l,C),re(M,C,null),_(C,ce);for(let Z=0;Z<D.length;Z+=1)D[Z].m(C,null);H=!0},p(E,[V]){const Z={};!h&&V&2&&(h=!0,Z.values=E[1],Ve(()=>h=!1)),o.$set(Z);const ne={};if(!g&&V&1&&(g=!0,ne.values=E[0],Ve(()=>g=!1)),d.$set(ne),J===(J=F(E))&&O?O.p(E,V):(O.d(1),O=J(E),O&&(O.c(),O.m(l,A))),V&4){G=E[2].notes;let S;for(S=0;S<G.length;S+=1){const oe=Ut(E,G,S);D[S]?(D[S].p(oe,V),Y(D[S],1)):(D[S]=Xt(oe),D[S].c(),Y(D[S],1),D[S].m(C,null))}for(Ke(),S=G.length;S<D.length;S+=1)ue(S);Je()}},i(E){if(!H){Y(o.$$.fragment,E),Y(d.$$.fragment,E),Y(M.$$.fragment,E);for(let V=0;V<G.length;V+=1)Y(D[V]);H=!0}},o(E){x(o.$$.fragment,E),x(d.$$.fragment,E),x(M.$$.fragment,E),D=D.filter(Boolean);for(let V=0;V<D.length;V+=1)x(D[V]);H=!1},d(E){E&&c(e),E&&c(s),E&&c(l),he(o),he(d),O.d(),he(M),Be(D,E)}}}function Nn(t,e,n){let s,l,r=[120],a=[4],o=!1;Ie.subscribe(A=>{n(2,l=A||l),n(0,r=[l.bpm]),n(1,a=[l.beat]),h()}),Me.subscribe(A=>{s=A||s,h()});function h(){l&&s&&l.syncWithTune(s)}function u(){n(3,o=!0),ye.playTrack(l,()=>i())}function i(){n(3,o=!1),ye.stop()}const p={stiffness:.15,damping:.8};function d(A){a=A,n(1,a)}function g(A){r=A,n(0,r)}function w(A,C,M,ce){M[ce]=A,n(2,l),n(0,r),n(1,a)}return t.$$.update=()=>{t.$$.dirty&3&&(n(2,l.bpm=r[0],l),n(2,l.beat=a[0],l))},[r,a,l,o,u,i,p,d,g,w]}class bn extends De{constructor(e){super();we(this,e,Nn,vn,Ae,{})}}function Rt(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function Wt(t){let e,n=t[4].name+"",s,l,r;return{c(){e=v("option"),s=R(n),l=P(),this.h()},l(a){e=N(a,"OPTION",{});var o=b(e);s=W(o,n),l=I(o),o.forEach(c),this.h()},h(){e.__value=r=t[6],e.value=e.__value},m(a,o){B(a,e,o),_(e,s),_(e,l)},p(a,o){o&1&&n!==(n=a[4].name+"")&&Le(s,n)},d(a){a&&c(e)}}}function En(t){let e,n,s,l,r,a,o=t[0],h=[];for(let u=0;u<o.length;u+=1)h[u]=Wt(Rt(t,o,u));return{c(){e=v("h2"),n=R("Track list"),s=P(),l=v("select");for(let u=0;u<h.length;u+=1)h[u].c();this.h()},l(u){e=N(u,"H2",{});var i=b(e);n=W(i,"Track list"),i.forEach(c),s=I(u),l=N(u,"SELECT",{name:!0,id:!0,class:!0});var p=b(l);for(let d=0;d<h.length;d+=1)h[d].l(p);p.forEach(c),this.h()},h(){y(l,"name","tracks_list"),y(l,"id","tracks_list"),y(l,"class","svelte-81oup7")},m(u,i){B(u,e,i),_(e,n),B(u,s,i),B(u,l,i);for(let p=0;p<h.length;p+=1)h[p].m(l,null);r||(a=_e(l,"change",t[1]),r=!0)},p(u,[i]){if(i&1){o=u[0];let p;for(p=0;p<o.length;p+=1){const d=Rt(u,o,p);h[p]?h[p].p(d,i):(h[p]=Wt(d),h[p].c(),h[p].m(l,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=o.length}},i:te,o:te,d(u){u&&c(e),u&&c(s),u&&c(l),Be(h,u),r=!1,a()}}}function yn(t,e,n){let s,l,r=[];Me.subscribe(o=>{s=o||s}),Ie.subscribe(o=>l=o||l);function a(o){var h;const u=parseInt((h=o.target)===null||h===void 0?void 0:h.value,10);if(!r[u])throw"Invalid track index selected.";l=r[u],Ie.set(l),l.syncWithTune(s)}return qe(()=>{n(0,r=Ie.list(s))}),[r,a]}class $n extends De{constructor(e){super();we(this,e,yn,En,Ae,{})}}function kn(t){let e,n,s,l,r,a,o,h,u,i,p;return l=new $n({}),o=new on({}),i=new bn({}),{c(){e=v("div"),n=v("aside"),s=v("section"),ae(l.$$.fragment),r=P(),a=v("section"),ae(o.$$.fragment),h=P(),u=v("aside"),ae(i.$$.fragment),this.h()},l(d){e=N(d,"DIV",{class:!0});var g=b(e);n=N(g,"ASIDE",{});var w=b(n);s=N(w,"SECTION",{});var A=b(s);ie(l.$$.fragment,A),A.forEach(c),r=I(w),a=N(w,"SECTION",{});var C=b(a);ie(o.$$.fragment,C),C.forEach(c),w.forEach(c),h=I(g),u=N(g,"ASIDE",{id:!0,class:!0});var M=b(u);ie(i.$$.fragment,M),M.forEach(c),g.forEach(c),this.h()},h(){y(u,"id","track"),y(u,"class","svelte-1x7zd4i"),y(e,"class","container svelte-1x7zd4i")},m(d,g){B(d,e,g),_(e,n),_(n,s),re(l,s,null),_(n,r),_(n,a),re(o,a,null),_(e,h),_(e,u),re(i,u,null),p=!0},p:te,i(d){p||(Y(l.$$.fragment,d),Y(o.$$.fragment,d),Y(i.$$.fragment,d),p=!0)},o(d){x(l.$$.fragment,d),x(o.$$.fragment,d),x(i.$$.fragment,d),p=!1},d(d){d&&c(e),he(l),he(o),he(i)}}}function Tn(t){return qe(()=>{ye.loadAudioFiles()}),[]}class Bn extends De{constructor(e){super();we(this,e,Tn,kn,Ae,{})}}export{Bn as default};
