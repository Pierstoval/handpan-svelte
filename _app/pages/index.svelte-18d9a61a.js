import{S as De,i as Ae,s as Be,e as v,t as L,k as w,c as N,a as b,g as z,n as P,d as h,b as y,f as B,H as f,I as ne,J as Me,K as de,L as _e,h as Le,M as Ce,N as Ze,A as qe,z as pt,O as Oe,C as mt,l as He,j as le,m as oe,o as ae,P as we,x as Y,u as Z,v as ie,r as Ke,Q as xe,w as Je,R as Pe,T as Ie,U as et,V as gt}from"../chunks/vendor-fe108c8f.js";var vt;(function(t){t.left="left",t.right="right"})(vt||(vt={}));var U;(function(t){t.A="A",t.B="B",t.C="C",t.D="D",t.E="E",t.F="F",t.G="G"})(U||(U={}));const qt=["Cb2","C2","C#2","Db2","D2","D#2","Eb2","A#5","B1","Bb5","B5","B#5","C6"],tt=[2,3,4,5],Kt={C:24,D:26,E:28,F:29,G:31,A:33,B:35};var R;(function(t){t.none="",t.sharp="#",t.flat="b"})(R||(R={}));var ee;(function(t){t.topNote="topNote",t.bottomNote="bottomNote",t.ding="ding"})(ee||(ee={}));var re;(function(t){t.note="note",t.slap="slap",t.ghost="ghost",t.none="none"})(re||(re={}));class be{constructor(e,n,s,l,r){if(this._isPlaying=!1,this._note=e,this._alteration=n,this._octave=s,this._type=l,this._position=r,r<0)throw new Error("Note position must be a non-negative integer.");this.refresh(),this.refreshHtmlElement()}get htmlElement(){return this._htmlElement}set htmlElement(e){if(!e){console.warn("Tried to set empty html element to handpan note.");return}this._htmlElement=e}get octave(){return this._octave}set octave(e){this._octave=e,this.refresh()}get alteration(){return this._alteration}set alteration(e){this._alteration=e,this.refresh()}get note(){return this._note}set note(e){this._note=e,this.refresh()}get type(){return this._type}get position(){return this._position}get fullName(){return this._note+this._alteration+this._octave}get isPlaying(){return this._isPlaying}get fullDetailedName(){return this._position+" - "+this.fullName+(this.isDing?" (ding)":"")+(this.isBottom?" (bottom)":"")}get isTop(){return this._type===ee.topNote}get isDing(){return this._type===ee.ding}get isBottom(){return this._type===ee.bottomNote}get midiNumber(){let e=Kt[this._note.toString()]+(this._octave-1)*12;return this._alteration===R.sharp?e++:this._alteration===R.flat&&e--,e}forcePosition(e){this._position=e}setPlaying(){if(!this._htmlElement){console.warn("Playing note is not attached to any HTML element. The issue might be that this not is not in your current handpan tune.");return}this._isPlaying=!0,this._htmlElement.classList.add("playing"),this._htmlElement.firstElementChild.classList.add("playing")}stopPlaying(){!this._htmlElement||(this._isPlaying=!1,this._htmlElement.classList.remove("playing"),this._htmlElement.firstElementChild.classList.remove("playing"))}refreshHtmlElement(){if(typeof document=="undefined")return;const e=document.querySelector(`[data-handpan-note="${this.fullName}"]`);e&&(this.htmlElement=e)}refresh(){const e={"B#":[U.C,R.none,1],"E#":[U.F,R.none,0],Ab:[U.G,R.sharp,0],Bb:[U.A,R.sharp,0],Cb:[U.B,R.none,-1],Db:[U.C,R.none,0],Eb:[U.D,R.sharp,0],Fb:[U.E,R.none,0],Gb:[U.F,R.sharp,0]},n=this._note+this._alteration,s=e[n];if(!s)return;let l;l&&(this._octave+l<Math.min(...tt)||this._octave+l<Math.max(...tt))||([this._note,this._alteration,l]=s,l&&(this._octave+=l))}}const Qe={clac:"clac/clac.flac",gu:"gu/D2.flac",notes:{E2:"shellopan/E2.flac",F2:"shellopan/F2.flac","F#2":"shellopan/Fs2.flac",G2:"shellopan/G2.flac","G#2":"shellopan/Gs2.flac",A2:"shellopan/A2.flac","A#2":"shellopan/As2.flac",B2:"shellopan/B2.flac",C3:"shellopan/C3.flac","C#3":"shellopan/Cs3.flac",D3:"shellopan/D3.flac","D#3":"shellopan/Ds3.flac",E3:"shellopan/E3.flac",F3:"shellopan/F3.flac","F#3":"shellopan/Fs3.flac",G3:"shellopan/G3.flac","G#3":"shellopan/Gs3.flac",A3:"shellopan/A3.flac","A#3":"shellopan/As3.flac",B3:"shellopan/B3.flac",C4:"shellopan/C4.flac","C#4":"shellopan/Cs4.flac",D4:"shellopan/D4.flac","D#4":"shellopan/Ds4.flac",E4:"shellopan/E4.flac",F4:"shellopan/F4.flac","F#4":"shellopan/Fs4.flac",G4:"shellopan/G4.flac","G#4":"shellopan/Gs4.flac",A4:"shellopan/A4.flac","A#4":"shellopan/As4.flac",B4:"shellopan/B4.flac",C5:"shellopan/C5.flac","C#5":"shellopan/Cs5.flac",D5:"shellopan/D5.flac","D#5":"shellopan/Ds5.flac",E5:"shellopan/E5.flac",F5:"shellopan/F5.flac","F#5":"shellopan/Fs5.flac",G5:"shellopan/G5.flac","G#5":"shellopan/Gs5.flac",A5:"shellopan/A5.flac"}},Nt=class{static get isPlaying(){return this._isPlaying}static loadAudioFiles(){this.loadAudioFile("clac",Qe.clac),this.loadAudioFile("gu",Qe.gu);for(const t in Qe.notes)this.loadAudioFile(t,Qe.notes[t])}static playTrack(t,e){this.stop(),this._isPlaying=!0;const n=this.getMsPerBeat(t.bpm,t.beat);let s=n;t.notes.forEach(l=>{this.addPlayingTimeout(()=>Nt.playNote(l),s),s+=n}),e&&this.addPlayingTimeout(e,s),this.addPlayingTimeout(()=>this.stop(),s)}static stop(){for(;this.playingTimeouts.length;)clearTimeout(this.playingTimeouts.shift());for(;this.playingNotes.length;)this.playingNotes.shift().stopPlaying();this.playingTimeouts=[],this.playingNotes=[],this._isPlaying=!1}static playNoteByType(t,e=1,n=null){if(!this.loadedAudio[t]){console.error(`Sound type "${t}" s not loaded or does not exist.`);return}const s=this.loadedAudio[t].cloneNode();if(s.volume=e,s.play(),n){const l=isNaN(s.duration)?this.DEFAULT_AUDIO_DURATION:s.duration;this.addPlayingTimeout(n,l)}}static playNote(t){switch(t.setPlaying(),this.playingNotes.push(t),!0){case t.isSlap:this.playNoteByType("clac",1,()=>this.stopNote(t));break;case t.isGhost:this.playNoteByType("clac",1,()=>this.stopNote(t));break;case t.isNone:break;default:this.playNoteByType(t.displayName,1,()=>this.stopNote(t));break}}static stopNote(t){t.stopPlaying(),this.playingNotes=this.playingNotes.filter(e=>e!==t)}static getMsPerBeat(t,e){return 1e3*60/t/e}static addPlayingTimeout(t,e){this.playingTimeouts.push(setTimeout(t,e))}static loadAudioFile(t,e){const n=new Audio;n.src=e,n.preload="auto",n.volume=1,n.addEventListener("canplaythrough",()=>this.loadedAudio[t]=n)}};let Ee=Nt;Ee.DEFAULT_AUDIO_DURATION=300;Ee._isPlaying=!1;Ee.loadedAudio={};Ee.playingTimeouts=[];Ee.playingNotes=[];function bt(t,e,n){const s=t.slice();return s[9]=e[n],s}function Et(t,e,n){const s=t.slice();return s[9]=e[n],s}function yt(t,e,n){const s=t.slice();return s[14]=e[n],s}function kt(t){let e,n=t[14]+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{class:!0});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[14],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(o,a){B(o,e,a),f(e,s),f(e,l)},p:ne,d(o){o&&h(e)}}}function $t(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{class:!0});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(o,a){B(o,e,a),f(e,s),f(e,l)},p:ne,d(o){o&&h(e)}}}function Tt(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{class:!0});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-1jj1888")},m(o,a){B(o,e,a),f(e,s),f(e,l)},p:ne,d(o){o&&h(e)}}}function Jt(t){let e,n,s,l=t[0].fullName+"",r,o,a,m,d,i,_,p,g,A,V,$,O,he,F,I,X,D,q,H,J,K,M,Q,ce,x,C,ke,E,G,W,fe=t[0].midiNumber+"",c,u,j,$e,Se,me=t[1],te=[];for(let T=0;T<me.length;T+=1)te[T]=kt(yt(t,me,T));let ge=t[2],S=[];for(let T=0;T<ge.length;T+=1)S[T]=$t(Et(t,ge,T));let Fe=t[3],ue=[];for(let T=0;T<Fe.length;T+=1)ue[T]=Tt(bt(t,Fe,T));return{c(){e=v("div"),n=v("div"),s=v("div"),r=L(l),o=w(),a=v("div"),m=v("div"),d=v("h3"),i=L("Note"),_=w(),p=v("div"),g=v("select");for(let T=0;T<te.length;T+=1)te[T].c();A=w(),V=v("div"),$=v("h3"),O=L("Octave"),he=w(),F=v("div"),I=v("select");for(let T=0;T<S.length;T+=1)S[T].c();X=w(),D=v("div"),q=v("h3"),H=L("Alteration"),J=w(),K=v("div"),M=v("select");for(let T=0;T<ue.length;T+=1)ue[T].c();Q=w(),ce=v("div"),x=v("h4"),C=L("Info"),ke=w(),E=v("ul"),G=v("li"),W=L("Midi: "),c=L(fe),this.h()},l(T){e=N(T,"DIV",{class:!0,"data-handpan-note":!0});var se=b(e);n=N(se,"DIV",{class:!0});var k=b(n);s=N(k,"DIV",{class:!0});var ve=b(s);r=z(ve,l),ve.forEach(h),o=P(k),a=N(k,"DIV",{class:!0});var Te=b(a);m=N(Te,"DIV",{class:!0});var Ue=b(m);d=N(Ue,"H3",{});var lt=b(d);i=z(lt,"Note"),lt.forEach(h),_=P(Ue),p=N(Ue,"DIV",{class:!0});var ot=b(p);g=N(ot,"SELECT",{size:!0,class:!0});var at=b(g);for(let Ne=0;Ne<te.length;Ne+=1)te[Ne].l(at);at.forEach(h),ot.forEach(h),Ue.forEach(h),A=P(Te),V=N(Te,"DIV",{class:!0});var Xe=b(V);$=N(Xe,"H3",{});var it=b($);O=z(it,"Octave"),it.forEach(h),he=P(Xe),F=N(Xe,"DIV",{class:!0});var rt=b(F);I=N(rt,"SELECT",{size:!0,class:!0});var ht=b(I);for(let Ne=0;Ne<S.length;Ne+=1)S[Ne].l(ht);ht.forEach(h),rt.forEach(h),Xe.forEach(h),X=P(Te),D=N(Te,"DIV",{class:!0});var Re=b(D);q=N(Re,"H3",{});var ct=b(q);H=z(ct,"Alteration"),ct.forEach(h),J=P(Re),K=N(Re,"DIV",{class:!0});var ut=b(K);M=N(ut,"SELECT",{size:!0,class:!0});var ft=b(M);for(let Ne=0;Ne<ue.length;Ne+=1)ue[Ne].l(ft);ft.forEach(h),ut.forEach(h),Re.forEach(h),Q=P(Te),ce=N(Te,"DIV",{});var We=b(ce);x=N(We,"H4",{});var _t=b(x);C=z(_t,"Info"),_t.forEach(h),ke=P(We),E=N(We,"UL",{});var dt=b(E);G=N(dt,"LI",{});var Ye=b(G);W=z(Ye,"Midi: "),c=z(Ye,fe),Ye.forEach(h),dt.forEach(h),We.forEach(h),Te.forEach(h),k.forEach(h),se.forEach(h),this.h()},h(){y(s,"class","note-name svelte-1jj1888"),y(g,"size",t[1].length),y(g,"class","svelte-1jj1888"),t[0].note===void 0&&Me(()=>t[6].call(g)),y(p,"class","select_container svelte-1jj1888"),y(m,"class","inputs_container svelte-1jj1888"),y(I,"size",t[2].length),y(I,"class","svelte-1jj1888"),t[0].octave===void 0&&Me(()=>t[7].call(I)),y(F,"class","select_container svelte-1jj1888"),y(V,"class","inputs_container svelte-1jj1888"),y(M,"size",t[3].length),y(M,"class","svelte-1jj1888"),t[0].alteration===void 0&&Me(()=>t[8].call(M)),y(K,"class","select_container svelte-1jj1888"),y(D,"class","inputs_container svelte-1jj1888"),y(a,"class","note-menu  svelte-1jj1888"),y(n,"class",u="note "+(t[0].isPlaying?"playing":"")+" svelte-1jj1888"),y(e,"class","note-container svelte-1jj1888"),y(e,"data-handpan-note",j=t[0].fullName)},m(T,se){B(T,e,se),f(e,n),f(n,s),f(s,r),f(n,o),f(n,a),f(a,m),f(m,d),f(d,i),f(m,_),f(m,p),f(p,g);for(let k=0;k<te.length;k+=1)te[k].m(g,null);de(g,t[0].note),f(a,A),f(a,V),f(V,$),f($,O),f(V,he),f(V,F),f(F,I);for(let k=0;k<S.length;k+=1)S[k].m(I,null);de(I,t[0].octave),f(a,X),f(a,D),f(D,q),f(q,H),f(D,J),f(D,K),f(K,M);for(let k=0;k<ue.length;k+=1)ue[k].m(M,null);de(M,t[0].alteration),f(a,Q),f(a,ce),f(ce,x),f(x,C),f(ce,ke),f(ce,E),f(E,G),f(G,W),f(G,c),$e||(Se=[_e(g,"change",t[6]),_e(g,"change",t[4]),_e(I,"change",t[7]),_e(I,"change",t[4]),_e(M,"change",t[8]),_e(M,"change",t[4])],$e=!0)},p(T,[se]){if(se&1&&l!==(l=T[0].fullName+"")&&Le(r,l),se&2){me=T[1];let k;for(k=0;k<me.length;k+=1){const ve=yt(T,me,k);te[k]?te[k].p(ve,se):(te[k]=kt(ve),te[k].c(),te[k].m(g,null))}for(;k<te.length;k+=1)te[k].d(1);te.length=me.length}if(se&3&&de(g,T[0].note),se&4){ge=T[2];let k;for(k=0;k<ge.length;k+=1){const ve=Et(T,ge,k);S[k]?S[k].p(ve,se):(S[k]=$t(ve),S[k].c(),S[k].m(I,null))}for(;k<S.length;k+=1)S[k].d(1);S.length=ge.length}if(se&3&&de(I,T[0].octave),se&8){Fe=T[3];let k;for(k=0;k<Fe.length;k+=1){const ve=bt(T,Fe,k);ue[k]?ue[k].p(ve,se):(ue[k]=Tt(ve),ue[k].c(),ue[k].m(M,null))}for(;k<ue.length;k+=1)ue[k].d(1);ue.length=Fe.length}se&3&&de(M,T[0].alteration),se&1&&fe!==(fe=T[0].midiNumber+"")&&Le(c,fe),se&3&&u!==(u="note "+(T[0].isPlaying?"playing":"")+" svelte-1jj1888")&&y(n,"class",u),se&3&&j!==(j=T[0].fullName)&&y(e,"data-handpan-note",j)},i:ne,o:ne,d(T){T&&h(e),Ce(te,T),Ce(S,T),Ce(ue,T),$e=!1,Ze(Se)}}}function Qt(t,e,n){let{note:s}=e,{onChange:l}=e;const r=Object.values(U),o=[1,2,3,4,5],a=Object.values(R);function m(){l&&l(s),Ee.playNoteByType(s.fullName)}qe(()=>s.refreshHtmlElement()),pt(()=>s.refreshHtmlElement());function d(){s.note=Oe(this),n(0,s),n(1,r)}function i(){s.octave=Oe(this),n(0,s),n(1,r)}function _(){s.alteration=Oe(this),n(0,s),n(1,r)}return t.$$set=p=>{"note"in p&&n(0,s=p.note),"onChange"in p&&n(5,l=p.onChange)},[s,r,o,a,m,l,d,i,_]}class nt extends De{constructor(e){super();Ae(this,e,Qt,Jt,Be,{note:0,onChange:5})}}class Yt{constructor(e){this._topNotes=[],this._dings=[],this._bottomNotes=[],e.forEach(n=>this.addNote(n)),this.refresh()}get dings(){return this._dings}get topNotes(){return this._topNotes}get bottomNotes(){return this._bottomNotes}get numberOfNotes(){return this._topNotes.length+this._dings.length+this._bottomNotes.length}get notes(){return this._notes||[]}addNote(e){e.isTop?(this._topNotes.push(e),e.forcePosition(this._topNotes.length)):e.isDing?(this._dings.push(e),e.forcePosition(this._dings.length)):e.isBottom&&(this._bottomNotes.push(e),e.forcePosition(this._topNotes.length))}addNoteAt(e,n){console.info("OK");debugger}getTopNoteByPosition(e){for(const n of this._topNotes)if(n.position===e)return n;return null}getBottomNoteByPosition(e){for(const n of this._bottomNotes)if(n.position===e)return n;return null}getDingByPosition(e){for(const n of this._dings)if(n.position===e)return n;return null}getSameNote(e){let n=null;switch(!0){case e.isTop:n=this.getTopNoteByPosition(e.position);break;case e.isDing:n=this.getDingByPosition(e.position);break;case e.isBottom:n=this.getBottomNoteByPosition(e.position);break;default:throw new Error("Expected note to be either top, ding or bottom, and found an unsupported value.")}return n}refresh(){const e=(n,s)=>{const l=n.position,r=s.position;switch(!0){case l<r:return-1;case l===r:throw new Error("Two notes cannot have the same position!");case l>r:return 1}};this._topNotes.sort(e),this._dings.sort(e),this._bottomNotes.sort(e)}}const{subscribe:Zt,set:Dt,update:An}=mt(At());function At(){return en()}function xt(){Dt(At())}function en(){return new Yt([new be(U.C,R.sharp,3,ee.bottomNote,0),new be(U.G,R.none,3,ee.ding,0),new be(U.A,R.none,3,ee.topNote,0),new be(U.B,R.none,3,ee.topNote,1),new be(U.C,R.sharp,4,ee.topNote,2),new be(U.D,R.sharp,4,ee.topNote,3),new be(U.E,R.none,4,ee.topNote,4),new be(U.F,R.sharp,4,ee.topNote,5),new be(U.G,R.sharp,4,ee.topNote,6)])}const ze={setDefault:xt,subscribe:Zt,set:Dt};function tn(t){let e,n,s,l,r;return{c(){e=v("div"),n=v("div"),s=L("+"),this.h()},l(o){e=N(o,"DIV",{class:!0});var a=b(e);n=N(a,"DIV",{class:!0});var m=b(n);s=z(m,"+"),m.forEach(h),a.forEach(h),this.h()},h(){y(n,"class","handpan-note svelte-117otwt"),y(e,"class","handpan-note-container svelte-117otwt")},m(o,a){B(o,e,a),f(e,n),f(n,s),l||(r=_e(n,"click",t[0]),l=!0)},p:ne,i:ne,o:ne,d(o){o&&h(e),l=!1,r()}}}function nn(t,e,n){let{position:s}=e,{type:l}=e,{tune:r}=e;ze.subscribe(a=>n(1,r=a||r));function o(){r.addNoteAt(s,l),ze.set(r)}return t.$$set=a=>{"position"in a&&n(2,s=a.position),"type"in a&&n(3,l=a.type),"tune"in a&&n(1,r=a.tune)},[o,r,s,l]}class Ge extends De{constructor(e){super();Ae(this,e,nn,tn,Be,{position:2,type:3,tune:1})}}function Bt(t,e,n){const s=t.slice();return s[4]=e[n],s[5]=e,s[6]=n,s}function wt(t,e,n){const s=t.slice();return s[4]=e[n],s[7]=e,s[6]=n,s}function Pt(t,e,n){const s=t.slice();return s[4]=e[n],s[8]=e,s[6]=n,s}function It(t,e){let n,s,l,r,o,a;function m(i){e[1](i,e[4],e[8],e[6])}let d={onChange:st};return e[4]!==void 0&&(d.note=e[4]),s=new nt({props:d}),Pe.push(()=>Ie(s,"note",m)),o=new Ge({props:{position:e[6],type:ee.topNote}}),{key:t,first:null,c(){n=He(),le(s.$$.fragment),r=w(),le(o.$$.fragment),this.h()},l(i){n=He(),oe(s.$$.fragment,i),r=P(i),oe(o.$$.fragment,i),this.h()},h(){this.first=n},m(i,_){B(i,n,_),ae(s,i,_),B(i,r,_),ae(o,i,_),a=!0},p(i,_){e=i;const p={};!l&&_&1&&(l=!0,p.note=e[4],we(()=>l=!1)),s.$set(p);const g={};_&1&&(g.position=e[6]),o.$set(g)},i(i){a||(Y(s.$$.fragment,i),Y(o.$$.fragment,i),a=!0)},o(i){Z(s.$$.fragment,i),Z(o.$$.fragment,i),a=!1},d(i){i&&h(n),ie(s,i),i&&h(r),ie(o,i)}}}function Ct(t,e){let n,s,l,r,o,a;function m(i){e[2](i,e[4],e[7],e[6])}let d={onChange:st};return e[4]!==void 0&&(d.note=e[4]),s=new nt({props:d}),Pe.push(()=>Ie(s,"note",m)),o=new Ge({props:{position:e[6],type:ee.ding}}),{key:t,first:null,c(){n=He(),le(s.$$.fragment),r=w(),le(o.$$.fragment),this.h()},l(i){n=He(),oe(s.$$.fragment,i),r=P(i),oe(o.$$.fragment,i),this.h()},h(){this.first=n},m(i,_){B(i,n,_),ae(s,i,_),B(i,r,_),ae(o,i,_),a=!0},p(i,_){e=i;const p={};!l&&_&1&&(l=!0,p.note=e[4],we(()=>l=!1)),s.$set(p);const g={};_&1&&(g.position=e[6]),o.$set(g)},i(i){a||(Y(s.$$.fragment,i),Y(o.$$.fragment,i),a=!0)},o(i){Z(s.$$.fragment,i),Z(o.$$.fragment,i),a=!1},d(i){i&&h(n),ie(s,i),i&&h(r),ie(o,i)}}}function jt(t,e){let n,s,l,r,o,a;function m(i){e[3](i,e[4],e[5],e[6])}let d={onChange:st};return e[4]!==void 0&&(d.note=e[4]),s=new nt({props:d}),Pe.push(()=>Ie(s,"note",m)),o=new Ge({props:{position:e[6],type:ee.bottomNote}}),{key:t,first:null,c(){n=He(),le(s.$$.fragment),r=w(),le(o.$$.fragment),this.h()},l(i){n=He(),oe(s.$$.fragment,i),r=P(i),oe(o.$$.fragment,i),this.h()},h(){this.first=n},m(i,_){B(i,n,_),ae(s,i,_),B(i,r,_),ae(o,i,_),a=!0},p(i,_){e=i;const p={};!l&&_&1&&(l=!0,p.note=e[4],we(()=>l=!1)),s.$set(p);const g={};_&1&&(g.position=e[6]),o.$set(g)},i(i){a||(Y(s.$$.fragment,i),Y(o.$$.fragment,i),a=!0)},o(i){Z(s.$$.fragment,i),Z(o.$$.fragment,i),a=!1},d(i){i&&h(n),ie(s,i),i&&h(r),ie(o,i)}}}function sn(t){let e,n,s,l,r,o,a,m,d,i=[],_=new Map,p,g,A,V,$,O,he,F=[],I=new Map,X,D,q,H,J,K,M,Q=[],ce=new Map,x;m=new Ge({props:{position:"0",type:ee.topNote}});let C=t[0].topNotes;const ke=c=>c[4];for(let c=0;c<C.length;c+=1){let u=Pt(t,C,c),j=ke(u);_.set(j,i[c]=It(j,u))}O=new Ge({props:{position:"0",type:ee.ding}});let E=t[0].dings;const G=c=>c[4];for(let c=0;c<E.length;c+=1){let u=wt(t,E,c),j=G(u);I.set(j,F[c]=Ct(j,u))}K=new Ge({props:{position:"0",type:ee.bottomNote}});let W=t[0].bottomNotes;const fe=c=>c[4];for(let c=0;c<W.length;c+=1){let u=Bt(t,W,c),j=fe(u);ce.set(j,Q[c]=jt(j,u))}return{c(){e=v("h2"),n=L("Tune"),s=w(),l=v("h3"),r=L("Top notes:"),o=w(),a=v("div"),le(m.$$.fragment),d=w();for(let c=0;c<i.length;c+=1)i[c].c();p=w(),g=v("h3"),A=L("Dings:"),V=w(),$=v("div"),le(O.$$.fragment),he=w();for(let c=0;c<F.length;c+=1)F[c].c();X=w(),D=v("h3"),q=L("Bottom notes:"),H=w(),J=v("div"),le(K.$$.fragment),M=w();for(let c=0;c<Q.length;c+=1)Q[c].c();this.h()},l(c){e=N(c,"H2",{});var u=b(e);n=z(u,"Tune"),u.forEach(h),s=P(c),l=N(c,"H3",{});var j=b(l);r=z(j,"Top notes:"),j.forEach(h),o=P(c),a=N(c,"DIV",{class:!0});var $e=b(a);oe(m.$$.fragment,$e),d=P($e);for(let S=0;S<i.length;S+=1)i[S].l($e);$e.forEach(h),p=P(c),g=N(c,"H3",{});var Se=b(g);A=z(Se,"Dings:"),Se.forEach(h),V=P(c),$=N(c,"DIV",{class:!0});var me=b($);oe(O.$$.fragment,me),he=P(me);for(let S=0;S<F.length;S+=1)F[S].l(me);me.forEach(h),X=P(c),D=N(c,"H3",{});var te=b(D);q=z(te,"Bottom notes:"),te.forEach(h),H=P(c),J=N(c,"DIV",{class:!0});var ge=b(J);oe(K.$$.fragment,ge),M=P(ge);for(let S=0;S<Q.length;S+=1)Q[S].l(ge);ge.forEach(h),this.h()},h(){y(a,"class","notes-list"),y($,"class","notes-list"),y(J,"class","notes-list")},m(c,u){B(c,e,u),f(e,n),B(c,s,u),B(c,l,u),f(l,r),B(c,o,u),B(c,a,u),ae(m,a,null),f(a,d);for(let j=0;j<i.length;j+=1)i[j].m(a,null);B(c,p,u),B(c,g,u),f(g,A),B(c,V,u),B(c,$,u),ae(O,$,null),f($,he);for(let j=0;j<F.length;j+=1)F[j].m($,null);B(c,X,u),B(c,D,u),f(D,q),B(c,H,u),B(c,J,u),ae(K,J,null),f(J,M);for(let j=0;j<Q.length;j+=1)Q[j].m(J,null);x=!0},p(c,[u]){u&1&&(C=c[0].topNotes,Ke(),i=xe(i,u,ke,1,c,C,_,a,et,It,null,Pt),Je()),u&1&&(E=c[0].dings,Ke(),F=xe(F,u,G,1,c,E,I,$,et,Ct,null,wt),Je()),u&1&&(W=c[0].bottomNotes,Ke(),Q=xe(Q,u,fe,1,c,W,ce,J,et,jt,null,Bt),Je())},i(c){if(!x){Y(m.$$.fragment,c);for(let u=0;u<C.length;u+=1)Y(i[u]);Y(O.$$.fragment,c);for(let u=0;u<E.length;u+=1)Y(F[u]);Y(K.$$.fragment,c);for(let u=0;u<W.length;u+=1)Y(Q[u]);x=!0}},o(c){Z(m.$$.fragment,c);for(let u=0;u<i.length;u+=1)Z(i[u]);Z(O.$$.fragment,c);for(let u=0;u<F.length;u+=1)Z(F[u]);Z(K.$$.fragment,c);for(let u=0;u<Q.length;u+=1)Z(Q[u]);x=!1},d(c){c&&h(e),c&&h(s),c&&h(l),c&&h(o),c&&h(a),ie(m);for(let u=0;u<i.length;u+=1)i[u].d();c&&h(p),c&&h(g),c&&h(V),c&&h($),ie(O);for(let u=0;u<F.length;u+=1)F[u].d();c&&h(X),c&&h(D),c&&h(H),c&&h(J),ie(K);for(let u=0;u<Q.length;u+=1)Q[u].d()}}}function st(t){console.info("change note",t)}function ln(t,e,n){let s;ze.subscribe(a=>n(0,s=a||s));function l(a,m,d,i){d[i]=a,n(0,s)}function r(a,m,d,i){d[i]=a,n(0,s)}function o(a,m,d,i){d[i]=a,n(0,s)}return[s,l,r,o]}class on extends De{constructor(e){super();Ae(this,e,ln,sn,Be,{})}}class pe{get htmlElement(){return this._htmlElement}set htmlElement(e){if(!e){console.error("Tried to set empty html element to track note.");return}this._htmlElement=e}get fullName(){var e,n;switch(!0){case this.isSlap:return"\xD7";case this.isGhost:return"\u{1F47B}";case this.isNone:return"\u2014";default:return(n=(e=this.note)==null?void 0:e.fullName)!=null?n:"-"}}get displayName(){if(!this.isNote)throw new Error(`Note name for the music player can only be retrieved on notes. Current note is "${this.type}".`);return this.note.fullName}get isNote(){return this.type===re.note}get isSlap(){return this.type===re.slap}get isGhost(){return this.type===re.ghost}get isNone(){return this.type===re.none}constructor(e,n){this.note=e,this.type=n,this.refreshHtmlElement()}static createGhost(){return new pe(null,re.ghost)}setPlaying(){if(!this._htmlElement){console.error(`Cannot highlight note ${this.fullName} because it does not have an HTML Element associated to it.`);return}this._htmlElement.firstElementChild.classList.add("playing"),this.note&&this.note.setPlaying()}stopPlaying(){if(!this._htmlElement){console.error(`Cannot disable highlight for note ${this.fullName} because it does not have an HTML Element associated to it.`);return}this._htmlElement.firstElementChild.classList.remove("playing"),this.note&&this.note.stopPlaying()}syncWithTuneNote(e){this.refreshHtmlElement(),!!e&&(this.note=e,e.refreshHtmlElement())}refreshHtmlElement(){if(typeof document=="undefined")return;const e=document.querySelector(`[data-track-note="${this.fullName}"]`);e&&(this.htmlElement=e)}}const je=class{constructor(t){this._bpm=120,this._beat=4,this._notes=[],this._name=t}get name(){return this._name}get notes(){return this._notes}get bpm(){return this._bpm}set bpm(t){t<=0&&(t=1),t>je.MAX_BPM&&(t=je.MAX_BPM),this._bpm=t}get beat(){return this._beat}set beat(t){t<je.MIN_BEAT&&(t=je.MIN_BEAT),t>je.MAX_BEAT&&(t=je.MAX_BEAT),this._beat=t}addNoteAt(t){const e=pe.createGhost();this._notes.splice(t,0,e)}addNote(t){this._notes.push(t)}syncWithTune(t){this._notes.forEach(e=>{e.syncWithTuneNote(t.getSameNote(e.note))})}};let ye=je;ye.MIN_BPM=50;ye.MAX_BPM=200;ye.MIN_BEAT=2;ye.MAX_BEAT=8;const{subscribe:an,set:Vt,update:Bn}=mt(Ft());function rn(t){return t?[Mt(),cn(t)]:[]}function hn(){Vt(Ft())}function Ft(){return Mt()}function cn(t){const e=new ye("Demo");return e.addNote(new pe(t.getDingByPosition(0),re.note)),e.addNote(new pe(t.getTopNoteByPosition(2),re.note)),e.addNote(new pe(null,re.slap)),e.addNote(new pe(t.getTopNoteByPosition(4),re.note)),e.addNote(new pe(t.getDingByPosition(0),re.note)),e.addNote(new pe(t.getTopNoteByPosition(3),re.note)),e.addNote(new pe(null,re.slap)),e.addNote(new pe(t.getTopNoteByPosition(5),re.note)),e}function Mt(){let t=0;const e={},n=new ye("All notes");n.bpm=180,tt.forEach(s=>{[U.C,U.D,U.E,U.F,U.G,U.A,U.B].forEach(r=>{[R.flat,R.none,R.sharp].forEach(a=>{const m=new be(r,a,s,ee.topNote,t++);if(qt.includes(m.fullName))return;const d=new pe(m,re.note);e[d.fullName]=d})})});for(let s in e){const l=e[s];n.addNote(l)}return n}const Ve={list:rn,setDefault:hn,subscribe:an,set:Vt};function Ot(t,e,n){const s=t.slice();return s[6]=e[n],s}function Ht(t,e,n){const s=t.slice();return s[9]=e[n],s}function Gt(t){let e,n=t[9]+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{class:!0});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[9],e.value=e.__value,y(e,"class","svelte-16amr53")},m(o,a){B(o,e,a),f(e,s),f(e,l)},p:ne,d(o){o&&h(e)}}}function St(t){let e,n,s,l,r,o,a,m,d,i=t[1].notes,_=[];for(let p=0;p<i.length;p+=1)_[p]=Lt(Ot(t,i,p));return{c(){e=v("div"),n=v("h3"),s=L("Note"),l=w(),r=v("div"),o=v("select");for(let p=0;p<_.length;p+=1)_[p].c();this.h()},l(p){e=N(p,"DIV",{class:!0});var g=b(e);n=N(g,"H3",{});var A=b(n);s=z(A,"Note"),A.forEach(h),l=P(g),r=N(g,"DIV",{class:!0});var V=b(r);o=N(V,"SELECT",{size:!0,class:!0});var $=b(o);for(let O=0;O<_.length;O+=1)_[O].l($);$.forEach(h),V.forEach(h),g.forEach(h),this.h()},h(){y(o,"size",a=t[1].numberOfNotes),y(o,"class","svelte-16amr53"),t[0].note===void 0&&Me(()=>t[5].call(o)),y(r,"class","track_select_container svelte-16amr53"),y(e,"class","track_inputs_container svelte-16amr53")},m(p,g){B(p,e,g),f(e,n),f(n,s),f(e,l),f(e,r),f(r,o);for(let A=0;A<_.length;A+=1)_[A].m(o,null);de(o,t[0].note),m||(d=[_e(o,"change",t[5]),_e(o,"change",t[3])],m=!0)},p(p,g){if(g&2){i=p[1].notes;let A;for(A=0;A<i.length;A+=1){const V=Ot(p,i,A);_[A]?_[A].p(V,g):(_[A]=Lt(V),_[A].c(),_[A].m(o,null))}for(;A<_.length;A+=1)_[A].d(1);_.length=i.length}g&2&&a!==(a=p[1].numberOfNotes)&&y(o,"size",a),g&5&&de(o,p[0].note)},d(p){p&&h(e),Ce(_,p),m=!1,Ze(d)}}}function Lt(t){let e,n=t[6].fullDetailedName+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{class:!0});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[6],e.value=e.__value,y(e,"class","svelte-16amr53")},m(o,a){B(o,e,a),f(e,s),f(e,l)},p(o,a){a&2&&n!==(n=o[6].fullDetailedName+"")&&Le(s,n),a&2&&r!==(r=o[6])&&(e.__value=r,e.value=e.__value)},d(o){o&&h(e)}}}function un(t){let e,n,s,l=t[0].fullName+"",r,o,a,m,d,i,_,p,g,A,V,$,O,he,F=t[2],I=[];for(let D=0;D<F.length;D+=1)I[D]=Gt(Ht(t,F,D));let X=t[0]&&t[1]&&t[0].isNote&&St(t);return{c(){e=v("div"),n=v("div"),s=v("div"),r=L(l),o=w(),a=v("div"),m=v("div"),d=v("h3"),i=L("Type"),_=w(),p=v("div"),g=v("select");for(let D=0;D<I.length;D+=1)I[D].c();A=w(),X&&X.c(),this.h()},l(D){e=N(D,"DIV",{class:!0,"data-track-note":!0});var q=b(e);n=N(q,"DIV",{class:!0});var H=b(n);s=N(H,"DIV",{class:!0});var J=b(s);r=z(J,l),J.forEach(h),o=P(H),a=N(H,"DIV",{class:!0});var K=b(a);m=N(K,"DIV",{class:!0});var M=b(m);d=N(M,"H3",{});var Q=b(d);i=z(Q,"Type"),Q.forEach(h),_=P(M),p=N(M,"DIV",{class:!0});var ce=b(p);g=N(ce,"SELECT",{size:!0,class:!0});var x=b(g);for(let C=0;C<I.length;C+=1)I[C].l(x);x.forEach(h),ce.forEach(h),M.forEach(h),A=P(K),X&&X.l(K),K.forEach(h),H.forEach(h),q.forEach(h),this.h()},h(){y(s,"class","note-name svelte-16amr53"),y(g,"size",t[2].length),y(g,"class","svelte-16amr53"),t[0].type===void 0&&Me(()=>t[4].call(g)),y(p,"class","track_select_container svelte-16amr53"),y(m,"class","track_inputs_container svelte-16amr53"),y(a,"class","track-note-menu svelte-16amr53"),y(n,"class",V="track-note type-"+t[0].type+" svelte-16amr53"),y(e,"class","track-note-container svelte-16amr53"),y(e,"data-track-note",$=t[0].fullName)},m(D,q){B(D,e,q),f(e,n),f(n,s),f(s,r),f(n,o),f(n,a),f(a,m),f(m,d),f(d,i),f(m,_),f(m,p),f(p,g);for(let H=0;H<I.length;H+=1)I[H].m(g,null);de(g,t[0].type),f(a,A),X&&X.m(a,null),O||(he=_e(g,"change",t[4]),O=!0)},p(D,[q]){if(q&1&&l!==(l=D[0].fullName+"")&&Le(r,l),q&4){F=D[2];let H;for(H=0;H<F.length;H+=1){const J=Ht(D,F,H);I[H]?I[H].p(J,q):(I[H]=Gt(J),I[H].c(),I[H].m(g,null))}for(;H<I.length;H+=1)I[H].d(1);I.length=F.length}q&5&&de(g,D[0].type),D[0]&&D[1]&&D[0].isNote?X?X.p(D,q):(X=St(D),X.c(),X.m(a,null)):X&&(X.d(1),X=null),q&5&&V!==(V="track-note type-"+D[0].type+" svelte-16amr53")&&y(n,"class",V),q&5&&$!==($=D[0].fullName)&&y(e,"data-track-note",$)},i:ne,o:ne,d(D){D&&h(e),Ce(I,D),X&&X.d(),O=!1,he()}}}function fn(t,e,n){let{trackNote:s}=e,{tune:l}=e;const r=Object.values(re);Ve.subscribe(d=>{d&&s.refreshHtmlElement()});function o(){Ee.playNote(s)}qe(()=>s.refreshHtmlElement()),pt(()=>s.refreshHtmlElement());function a(){s.type=Oe(this),n(0,s),n(2,r)}function m(){s.note=Oe(this),n(0,s),n(2,r)}return t.$$set=d=>{"trackNote"in d&&n(0,s=d.trackNote),"tune"in d&&n(1,l=d.tune)},[s,l,r,o,a,m]}class _n extends De{constructor(e){super();Ae(this,e,fn,un,Be,{trackNote:0,tune:1})}}function dn(t){let e,n,s,l,r;return{c(){e=v("div"),n=v("div"),s=L("+"),this.h()},l(o){e=N(o,"DIV",{class:!0});var a=b(e);n=N(a,"DIV",{class:!0});var m=b(n);s=z(m,"+"),m.forEach(h),a.forEach(h),this.h()},h(){y(n,"class","track-note svelte-g8snzt"),y(e,"class","track-note-container svelte-g8snzt")},m(o,a){B(o,e,a),f(e,n),f(n,s),l||(r=_e(n,"click",t[0]),l=!0)},p:ne,i:ne,o:ne,d(o){o&&h(e),l=!1,r()}}}function pn(t,e,n){let{position:s}=e,{track:l}=e;Ve.subscribe(o=>n(1,l=o||l));function r(){l.addNoteAt(s),Ve.set(l)}return t.$$set=o=>{"position"in o&&n(2,s=o.position),"track"in o&&n(1,l=o.track)},[r,l,s]}class zt extends De{constructor(e){super();Ae(this,e,pn,dn,Be,{position:2,track:1})}}function Ut(t,e,n){const s=t.slice();return s[13]=e[n],s[14]=e,s[15]=n,s}function mn(t){let e,n,s,l;return{c(){e=v("button"),n=L("\u23EF"),this.h()},l(r){e=N(r,"BUTTON",{type:!0,class:!0});var o=b(e);n=z(o,"\u23EF"),o.forEach(h),this.h()},h(){y(e,"type","button"),y(e,"class","track-control svelte-zgc0o4")},m(r,o){B(r,e,o),f(e,n),s||(l=_e(e,"click",t[5]),s=!0)},p:ne,d(r){r&&h(e),s=!1,l()}}}function gn(t){let e,n,s,l;return{c(){e=v("button"),n=L("\u23F8"),this.h()},l(r){e=N(r,"BUTTON",{type:!0,class:!0});var o=b(e);n=z(o,"\u23F8"),o.forEach(h),this.h()},h(){y(e,"type","button"),y(e,"class","track-control svelte-zgc0o4")},m(r,o){B(r,e,o),f(e,n),s||(l=_e(e,"click",t[6]),s=!0)},p:ne,d(r){r&&h(e),s=!1,l()}}}function Xt(t){let e,n,s,l,r,o;function a(i){t[11](i,t[13],t[14],t[15])}function m(i){t[12](i)}let d={};return t[13]!==void 0&&(d.trackNote=t[13]),t[2]!==void 0&&(d.tune=t[2]),e=new _n({props:d}),Pe.push(()=>Ie(e,"trackNote",a)),Pe.push(()=>Ie(e,"tune",m)),r=new zt({props:{position:t[15]}}),{c(){le(e.$$.fragment),l=w(),le(r.$$.fragment)},l(i){oe(e.$$.fragment,i),l=P(i),oe(r.$$.fragment,i)},m(i,_){ae(e,i,_),B(i,l,_),ae(r,i,_),o=!0},p(i,_){t=i;const p={};!n&&_&8&&(n=!0,p.trackNote=t[13],we(()=>n=!1)),!s&&_&4&&(s=!0,p.tune=t[2],we(()=>s=!1)),e.$set(p)},i(i){o||(Y(e.$$.fragment,i),Y(r.$$.fragment,i),o=!0)},o(i){Z(e.$$.fragment,i),Z(r.$$.fragment,i),o=!1},d(i){ie(e,i),i&&h(l),ie(r,i)}}}function vn(t){let e,n,s,l,r,o,a,m,d,i,_,p,g,A,V,$,O,he,F,I;function X(E){t[8](E)}let D={min:ye.MIN_BEAT,max:ye.MAX_BEAT,float:!0,pips:!0,all:"label",springValues:t[7]};t[1]!==void 0&&(D.values=t[1]),a=new gt({props:D}),Pe.push(()=>Ie(a,"values",X));function q(E){t[9](E)}let H={min:ye.MIN_BPM,max:ye.MAX_BPM,step:5,float:!0,pips:!0,pipstep:2,all:"label",springValues:t[7]};t[0]!==void 0&&(H.values=t[0]),p=new gt({props:H}),Pe.push(()=>Ie(p,"values",q));function J(E,G){return E[4]?gn:mn}let K=J(t),M=K(t);function Q(E){t[10](E)}let ce={};t[2]!==void 0&&(ce.tune=t[2]),O=new zt({props:ce}),Pe.push(()=>Ie(O,"tune",Q));let x=t[3].notes,C=[];for(let E=0;E<x.length;E+=1)C[E]=Xt(Ut(t,x,E));const ke=E=>Z(C[E],1,1,()=>{C[E]=null});return{c(){e=v("h2"),n=L("Track"),s=w(),l=v("section"),r=v("div"),o=L(`Beat:
		`),le(a.$$.fragment),d=w(),i=v("div"),_=L(`Speed (bpm):
		`),le(p.$$.fragment),A=w(),M.c(),V=w(),$=v("div"),le(O.$$.fragment),F=w();for(let E=0;E<C.length;E+=1)C[E].c();this.h()},l(E){e=N(E,"H2",{});var G=b(e);n=z(G,"Track"),G.forEach(h),s=P(E),l=N(E,"SECTION",{class:!0});var W=b(l);r=N(W,"DIV",{});var fe=b(r);o=z(fe,`Beat:
		`),oe(a.$$.fragment,fe),fe.forEach(h),d=P(W),i=N(W,"DIV",{});var c=b(i);_=z(c,`Speed (bpm):
		`),oe(p.$$.fragment,c),c.forEach(h),A=P(W),M.l(W),V=P(W),$=N(W,"DIV",{class:!0});var u=b($);oe(O.$$.fragment,u),F=P(u);for(let j=0;j<C.length;j+=1)C[j].l(u);u.forEach(h),W.forEach(h),this.h()},h(){y($,"class","notes svelte-zgc0o4"),y(l,"class","svelte-zgc0o4")},m(E,G){B(E,e,G),f(e,n),B(E,s,G),B(E,l,G),f(l,r),f(r,o),ae(a,r,null),f(l,d),f(l,i),f(i,_),ae(p,i,null),f(l,A),M.m(l,null),f(l,V),f(l,$),ae(O,$,null),f($,F);for(let W=0;W<C.length;W+=1)C[W].m($,null);I=!0},p(E,[G]){const W={};!m&&G&2&&(m=!0,W.values=E[1],we(()=>m=!1)),a.$set(W);const fe={};!g&&G&1&&(g=!0,fe.values=E[0],we(()=>g=!1)),p.$set(fe),K===(K=J(E))&&M?M.p(E,G):(M.d(1),M=K(E),M&&(M.c(),M.m(l,V)));const c={};if(!he&&G&4&&(he=!0,c.tune=E[2],we(()=>he=!1)),O.$set(c),G&12){x=E[3].notes;let u;for(u=0;u<x.length;u+=1){const j=Ut(E,x,u);C[u]?(C[u].p(j,G),Y(C[u],1)):(C[u]=Xt(j),C[u].c(),Y(C[u],1),C[u].m($,null))}for(Ke(),u=x.length;u<C.length;u+=1)ke(u);Je()}},i(E){if(!I){Y(a.$$.fragment,E),Y(p.$$.fragment,E),Y(O.$$.fragment,E);for(let G=0;G<x.length;G+=1)Y(C[G]);I=!0}},o(E){Z(a.$$.fragment,E),Z(p.$$.fragment,E),Z(O.$$.fragment,E),C=C.filter(Boolean);for(let G=0;G<C.length;G+=1)Z(C[G]);I=!1},d(E){E&&h(e),E&&h(s),E&&h(l),ie(a),ie(p),M.d(),ie(O),Ce(C,E)}}}function Nn(t,e,n){let s,l,r=[120],o=[4],a=!1;Ve.subscribe($=>{n(3,l=$||l),n(0,r=[l.bpm]),n(1,o=[l.beat]),s&&l.syncWithTune(s)}),ze.subscribe($=>n(2,s=$||s));function m(){n(4,a=!0),Ee.playTrack(l,()=>d())}function d(){n(4,a=!1),Ee.stop()}const i={stiffness:.15,damping:.8};function _($){o=$,n(1,o)}function p($){r=$,n(0,r)}function g($){s=$,n(2,s)}function A($,O,he,F){he[F]=$,n(3,l),n(0,r),n(1,o)}function V($){s=$,n(2,s)}return t.$$.update=()=>{t.$$.dirty&3&&(n(3,l.bpm=r[0],l),n(3,l.beat=o[0],l))},[r,o,s,l,a,m,d,i,_,p,g,A,V]}class bn extends De{constructor(e){super();Ae(this,e,Nn,vn,Be,{})}}function Rt(t,e,n){const s=t.slice();return s[5]=e[n],s}function Wt(t){let e,n=t[5].name+"",s,l,r;return{c(){e=v("option"),s=L(n),l=w(),this.h()},l(o){e=N(o,"OPTION",{});var a=b(e);s=z(a,n),l=P(a),a.forEach(h),this.h()},h(){e.__value=r=t[5],e.value=e.__value},m(o,a){B(o,e,a),f(e,s),f(e,l)},p(o,a){a&2&&n!==(n=o[5].name+"")&&Le(s,n),a&2&&r!==(r=o[5])&&(e.__value=r,e.value=e.__value)},d(o){o&&h(e)}}}function En(t){let e,n,s,l,r,o,a=t[1],m=[];for(let d=0;d<a.length;d+=1)m[d]=Wt(Rt(t,a,d));return{c(){e=v("h2"),n=L("Track list"),s=w(),l=v("select");for(let d=0;d<m.length;d+=1)m[d].c();this.h()},l(d){e=N(d,"H2",{});var i=b(e);n=z(i,"Track list"),i.forEach(h),s=P(d),l=N(d,"SELECT",{name:!0,id:!0,class:!0});var _=b(l);for(let p=0;p<m.length;p+=1)m[p].l(_);_.forEach(h),this.h()},h(){y(l,"name","tracks_list"),y(l,"id","tracks_list"),y(l,"class","svelte-81oup7"),t[0]===void 0&&Me(()=>t[3].call(l))},m(d,i){B(d,e,i),f(e,n),B(d,s,i),B(d,l,i);for(let _=0;_<m.length;_+=1)m[_].m(l,null);de(l,t[0]),r||(o=[_e(l,"change",t[3]),_e(l,"change",t[2])],r=!0)},p(d,[i]){if(i&2){a=d[1];let _;for(_=0;_<a.length;_+=1){const p=Rt(d,a,_);m[_]?m[_].p(p,i):(m[_]=Wt(p),m[_].c(),m[_].m(l,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=a.length}i&3&&de(l,d[0])},i:ne,o:ne,d(d){d&&h(e),d&&h(s),d&&h(l),Ce(m,d),r=!1,Ze(o)}}}function yn(t,e,n){let s,l,r=[];ze.subscribe(m=>{s=m||s}),Ve.subscribe(m=>n(0,l=m||l));function o(){Ve.set(l),l.syncWithTune(s)}qe(()=>{n(1,r=Ve.list(s))});function a(){l=Oe(this),n(0,l),n(1,r)}return[l,r,o,a]}class kn extends De{constructor(e){super();Ae(this,e,yn,En,Be,{})}}function $n(t){let e,n,s,l,r,o,a,m,d,i,_;return l=new kn({}),a=new on({}),i=new bn({}),{c(){e=v("div"),n=v("aside"),s=v("section"),le(l.$$.fragment),r=w(),o=v("section"),le(a.$$.fragment),m=w(),d=v("aside"),le(i.$$.fragment),this.h()},l(p){e=N(p,"DIV",{class:!0});var g=b(e);n=N(g,"ASIDE",{});var A=b(n);s=N(A,"SECTION",{});var V=b(s);oe(l.$$.fragment,V),V.forEach(h),r=P(A),o=N(A,"SECTION",{});var $=b(o);oe(a.$$.fragment,$),$.forEach(h),A.forEach(h),m=P(g),d=N(g,"ASIDE",{id:!0,class:!0});var O=b(d);oe(i.$$.fragment,O),O.forEach(h),g.forEach(h),this.h()},h(){y(d,"id","track"),y(d,"class","svelte-1x7zd4i"),y(e,"class","container svelte-1x7zd4i")},m(p,g){B(p,e,g),f(e,n),f(n,s),ae(l,s,null),f(n,r),f(n,o),ae(a,o,null),f(e,m),f(e,d),ae(i,d,null),_=!0},p:ne,i(p){_||(Y(l.$$.fragment,p),Y(a.$$.fragment,p),Y(i.$$.fragment,p),_=!0)},o(p){Z(l.$$.fragment,p),Z(a.$$.fragment,p),Z(i.$$.fragment,p),_=!1},d(p){p&&h(e),ie(l),ie(a),ie(i)}}}function Tn(t){return qe(()=>{Ee.loadAudioFiles()}),[]}class wn extends De{constructor(e){super();Ae(this,e,Tn,$n,Be,{})}}export{wn as default};
